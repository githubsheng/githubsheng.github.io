var draw={xml_namespace:"http://www.w3.org/2000/svg",createPath:function(a){var b=document.createElementNS(this.xml_namespace,"path");b.setAttributeNS(null,"d",a);return b},createStraightLines:function(a,b,c){c="M"+a[c]+" "+a[c+1];for(var e=b;e<a.length;e+=b)c=c+" "+a[e]+" "+a[e+1];return this.createPath(c)},createStackWithStraightLines:function(a,b,c,e,f){c="M"+a[c]+" "+a[c+1];for(var g=b;g<a.length;g+=b)c=c+" "+a[g]+" "+a[g+1];c=c+" "+e[0]+" "+e[1]+" "+f[0]+" "+f[1]+" Z";return this.createPath(c)},
createStraightLine:function(a,b,c,e){var f=document.createElementNS(this.xml_namespace,"line");f.setAttributeNS(null,"x1",a);f.setAttributeNS(null,"y1",b);f.setAttributeNS(null,"x2",c);f.setAttributeNS(null,"y2",e);f.setAttributeNS(null,"stroke","black");return f},createQuadraticBezierCurve:function(a){return this.createPath("M"+a[0]+" "+a[1]+" Q "+a[2]+" "+a[3]+" "+a[4]+" "+a[5])},createText:function(a,b,c,e,f,g){var h=document.createElementNS(this.xml_namespace,"text");h.setAttributeNS(null,"x",
a);h.setAttributeNS(null,"y",b);e?h.setAttributeNS(null,"font-size",e):h.setAttributeNS(null,"font-size","11");f&&h.setAttributeNS(null,"text-anchor",f);"middle"===g?h.setAttributeNS(null,"dy","0.3em"):"top"===g&&h.setAttributeNS(null,"dy","1em");!1!==c&&(h.textContent=c);return h},createTextSpan:function(a,b,c,e,f,g){c=document.createElementNS(this.xml_namespace,"tspan");!1!==a&&c.setAttributeNS(null,"x",a);!1!==b&&c.setAttributeNS(null,"y",b);e?c.setAttributeNS(null,"font-size",e):c.setAttributeNS(null,
"font-size","11");f&&c.setAttributeNS(null,"text-anchor",f);g&&c.setAttributeNS(null,"dominant-baseline",g);return c},createRectangular:function(a,b,c,e){var f=document.createElementNS(this.xml_namespace,"rect");f.setAttributeNS(null,"x",a);f.setAttributeNS(null,"y",b);f.setAttributeNS(null,"width",c);f.setAttributeNS(null,"height",e);return f},createCircle:function(a,b,c){var e=document.createElementNS(this.xml_namespace,"circle");e.setAttributeNS(null,"cx",a);e.setAttributeNS(null,"cy",b);e.setAttributeNS(null,
"r",c);return e},createArcOfCircle:function(a,b,c,e,f){var g=util.polarToCartesian(a,b,c,f),h=util.polarToCartesian(a,b,c,e);a=["M",a,b,"",g[0],g[1],"A",c,c,0,180>=f-e?"0":"1",0,h[0],h[1],"Z"].join(" ");return this.createPath(a)},createGroup:function(){return document.createElementNS(this.xml_namespace,"g")},createDefs:function(){return document.createElementNS(this.xml_namespace,"defs")},rotate:function(a,b,c,e){var f=a.getAttributeNS(null,"transform");if(f){for(var f=f.split(") "),g=0;g<f.length;g++)"rotate"===
f[g].substr(0,6)&&(f[g]="rotate("+e+" "+b+" "+c+")");f=f.join(" ")}else f="rotate("+e+" "+b+" "+c+")";a.setAttributeNS(null,"transform",f)},translate:function(a,b,c){b="translate("+b+"px, "+c+"px)";a.style.MozTransform=b;a.style.webkitTransform=b;a.style.msTransform=b;a.style.transform=b},scale:function(a,b){var c=a.getAttributeNS(null,"transform");if(c){for(var c=c.split(") "),e=0;e<c.length;e++)"scale"===c[e].substr(0,5)&&(c[e]="scale("+b+")");c=c.join(" ")}else c="scale("+b+")";a.setAttributeNS(null,
"transform",c)},setStrokeFill:function(a,b,c,e){b&&a.setAttributeNS(null,"stroke",b);!1!==c&&a.setAttributeNS(null,"stroke-width",c);e&&a.setAttributeNS(null,"fill",e)},createLinearGradient:function(a,b){var c=document.createElementNS(this.xml_namespace,"linearGradient");c.setAttributeNS(null,"x1",a[0]);c.setAttributeNS(null,"y1",a[1]);c.setAttributeNS(null,"x2",b[0]);c.setAttributeNS(null,"y2",b[1]);return c},addLinearGradientStop:function(a,b,c,e){var f=document.createElementNS(this.xml_namespace,
"stop");f.setAttributeNS(null,"offset",b);f.setAttributeNS(null,"stop-color",c);e&&f.setAttributeNS(null,"stop-opacity",e);a.appendChild(f)},setVisibility:function(a,b){b?a.setAttributeNS(null,"visibility","visibile"):a.setAttributeNS(null,"visibility","hidden")},setPointerEvent:function(a,b,c){b&&a.setAttributeNS(null,"pointer-events","fill");c&&a.setAttributeNS(null,"pointer-events","stroke")},setId:function(a,b){a.setAttribute("id",b)}};var colors={blue:{strokeColor:"rgb(0, 122, 204)",fillColor:"rgb(0, 153, 255)",linearGradientId:"linear-gradient-blue",linearGradientFill:"url(#linear-gradient-blue)"},purple:{strokeColor:"rgb(82, 0, 163)",fillColor:"rgb(102, 0, 204)",linearGradientId:"linear-gradient-purple",linearGradientFill:"url(#linear-gradient-purple)"},lightBlue:{strokeColor:"rgb(52, 147, 184)",fillColor:"rgb(62, 195, 246)",linearGradientId:"linear-gradient-lightBlue",linearGradientFill:"url(#linear-gradient-lightBlue)"},green:{strokeColor:"rgb(0, 163, 122)",
fillColor:"rgb(0, 204, 153)",linearGradientId:"linear-gradient-green",linearGradientFill:"url(#linear-gradient-green)"},darkGreen:{strokeColor:"rgb(35, 156, 97)",fillColor:"rgb(0, 180, 94)",linearGradientId:"linear-gradient-darkGreen",linearGradientFill:"url(#linear-gradient-darkGreen)"},red:{strokeColor:"rgb(173, 32, 0)",fillColor:"rgb(255, 87, 45)",linearGradientId:"linear-gradient-red",linearGradientFill:"url(#linear-gradient-red)"},yellow:{strokeColor:"rgb(163, 122, 0)",fillColor:"rgb(204, 153, 0)",
linearGradientId:"linear-gradient-yellow",linearGradientFill:"url(#linear-gradient-yellow)"},initLinearGradients:function(a){function b(a){var b=draw.createLinearGradient(["0%","0%"],["0%","100%"]);draw.addLinearGradientStop(b,"0",a.fillColor,"1");draw.addLinearGradientStop(b,"1",a.fillColor,"0");draw.setId(b,a.linearGradientId);c.appendChild(b)}var c=draw.createDefs();b(this.blue);b(this.purple);b(this.red);b(this.lightBlue);b(this.green);b(this.darkGreen);b(this.yellow);a.appendChild(c)},convertToWebGLcolorArray:function(a){a=
a.substring(4,a.length-1).replace(/ /g,"").split(",");a[0]=+a[0]/255;a[1]=+a[1]/255;a[2]=+a[2]/255;return a}};var util={pickFirstAvailable:function(){for(var a in arguments){var b=arguments[a];if(void 0!==b&&null!==b)return b}},chooseBetween:function(a,b,c){return a?b:c},perfectNumber:function(a){return parseFloat(a.toPrecision(12))},findElementIdxUsingBinarySearch:function(a,b){for(var c=0,e=a.length-1,f=0;1<e-c;)f=Math.floor((e-c)/2),b<a[c+f]?e=c+f:c+=f;var f=b-a[c],g=a[e]-b;return f<g?c:f>g?e:c},polarToCartesian:function(a,b,c,e){e=(e-90)*Math.PI/180;return[a+c*Math.cos(e),b+c*Math.sin(e)]}};function Axis(){this.preferredMarkDataIntervals=[1,2,2.5,5,10]}Axis.prototype.draw=function(){this.drawMarks();this.drawLabels()};
Axis.prototype.adjustMarkInterval=function(){for(var a=(this.max-this.min)/this.length*this.preferredMarkPixelInterval,b=a,c=Math.pow(10,Math.floor(Math.log(a)/Math.log(10))),a=a/c,e=0;e<this.preferredMarkDataIntervals.length;e++)if(a<(this.preferredMarkDataIntervals[e]+util.pickFirstAvailable(this.preferredMarkDataIntervals[e+1],this.preferredMarkDataIntervals[e]))/2){a=this.preferredMarkDataIntervals[e];break}this.markDataInterval=a*=c;this.markPixelInterval=a/b*this.preferredMarkPixelInterval};
function X_Axis(){}X_Axis.prototype=new Axis;X_Axis.prototype.constructor=X_Axis;X_Axis.prototype.analyze=function(){this.adjustMarkInterval();this.calculateMarkPositions();this.calculateLabelPositions();return this.analyzeReturn()};X_Axis.prototype.analyzeReturn=function(){return{startPoint:this.originPosition[0]+this.leftPadding,pixelPerData:this.markPixelInterval/this.markDataInterval,length:this.length,min:this.min}};
X_Axis.prototype.drawMarks=function(){for(var a="",b=0;b<this.markPositions.length;b+=2)var c=this.markPositions[b],e=this.markPositions[b+1],a=a+"M"+c+" "+e+" L"+c+" "+(e+5)+" ";a=a.trim();a=draw.createPath(a);draw.setStrokeFill(a,"darkgray",!1,!1);this.svg.appendChild(a)};
X_Axis.prototype.drawLabels=function(){for(var a=draw.createGroup(),b=this.min,c=0;c<this.labelPositions.length;c+=2)b=util.perfectNumber(this.min+this.markDataInterval*c/2),a.appendChild(draw.createText(this.labelPositions[c],this.labelPositions[c+1],b,11,"middle",!1));this.svg.appendChild(a)};
X_Axis.prototype.calculateMarkPositions=function(){for(var a=this.originPosition[0]+this.leftPadding,b=this.originPosition[1],c=this.min;c<this.max||c===this.max;)this.markPositions.push(a),this.markPositions.push(b),a+=this.markPixelInterval,c=util.perfectNumber(c+this.markDataInterval)};X_Axis.prototype.calculateLabelPositions=function(){for(var a=0;a<this.markPositions.length;a+=2)this.labelPositions.push(this.markPositions[a]),this.labelPositions.push(this.markPositions[a+1]+16)};
function Y_Axis(){}Y_Axis.prototype=new Axis;Y_Axis.prototype.constructor=Y_Axis;Y_Axis.prototype.analyze=function(){this.adjustMarkInterval();this.calculateMarkPositions();this.calculateLabelPositions();return{startPoint:this.originPosition[1],pixelPerData:this.markPixelInterval/this.markDataInterval,min:this.min}};
Y_Axis.prototype.adjustMarkInterval=function(){Axis.prototype.adjustMarkInterval.apply(this);var a=util.perfectNumber(this.markDataInterval*Math.floor(this.min/this.markDataInterval));this.min=this.min!==a||this.doNotExpandMin?a:util.perfectNumber(this.min-this.markDataInterval);a=util.perfectNumber(this.markDataInterval*Math.ceil(this.max/this.markDataInterval));this.max=this.max!==a||this.doNotExpandMax?a:util.perfectNumber(this.max+this.markDataInterval);this.markPixelInterval=this.length/((this.max-
this.min)/this.markDataInterval)};Y_Axis.prototype.calculateMarkPositions=function(){for(var a=this.originPosition[0],b=this.originPosition[1],c=this.min;c<this.max||c===this.max;)this.markPositions.push(a),this.markPositions.push(b),b-=this.markPixelInterval,c=util.perfectNumber(c+this.markDataInterval)};Y_Axis.prototype.calculateLabelPositions=function(){for(var a=0;a<this.markPositions.length;a+=2)this.labelPositions.push(this.markPositions[a]),this.labelPositions.push(this.markPositions[a+1])};
Y_Axis.prototype.drawMarks=function(){for(var a="",b=this.x_axis.length+util.pickFirstAvailable(this.x_axis.leftPadding,0)+util.pickFirstAvailable(this.x_axis.rightPadding,0),c=0;c<this.markPositions.length;c+=2)var e=this.markPositions[c],f=this.markPositions[c+1],a=a+"M"+e+" "+f+" L"+(e+b)+" "+f+" ";a=a.trim();a=draw.createPath(a);draw.setStrokeFill(a,"darkgray","1","none");this.svg.appendChild(a)};
Y_Axis.prototype.drawLabels=function(){for(var a=this.min,b=0;b<this.labelPositions.length;b+=2)a=util.perfectNumber(this.min+this.markDataInterval*b/2),this.svg.appendChild(draw.createText(this.labelPositions[b]-10,this.labelPositions[b+1],a,"11","end","middle"))};function X_LinearAxis(a,b,c,e,f,g,h){this.leftPadding=g;this.rightPadding=h;this.svg=a;this.originPosition=f;this.length=b-g-h;this.min=c;this.max=e;this.preferredMarkPixelInterval=100;this.markPixelInterval=this.markDataInterval=0;this.markPositions=[];this.labelPositions=[];this.originPosition=f}X_LinearAxis.prototype=new X_Axis;X_LinearAxis.prototype.constructor=X_LinearAxis;
function Y_LinearAxis(a,b,c,e,f,g,h,p){this.svg=a;this.originPosition;this.length=b;this.min=c;this.max=e;this.preferredMarkPixelInterval=75;this.markPixelInterval=this.markDataInterval=0;this.originPosition=f;this.x_axis=g;this.doNotExpandMin=h;this.doNotExpandMax=p;this.markPositions=[];this.labelPositions=[]}Y_LinearAxis.prototype=new Y_Axis;Y_LinearAxis.prototype.constructor=Y_LinearAxis;Y_LinearAxis.prototype.draw=function(){this.drawMarks();this.drawLabels()};function X_CategoryAxis(a,b,c,e,f,g){this.svg=a;this.originPosition=c;this.length=b;this.markPixelInterval=0;this.markPositions=[];this.labelPositions=[];this.originPosition=c;this.categoriesNames=e;this.leftPadding=f;this.rightPadding=g}X_CategoryAxis.prototype=new X_Axis;X_CategoryAxis.constructor=X_CategoryAxis;X_CategoryAxis.prototype.adjustMarkInterval=function(){this.markPixelInterval=this.length/this.categoriesNames.length};
X_CategoryAxis.prototype.calculateMarkPositions=function(){var a=this.originPosition[0]+this.leftPadding,b=this.originPosition[1];this.markPositions.push(a);this.markPositions.push(b);for(var c=0;c<this.categoriesNames.length;c++)this.markPositions.push(a+this.markPixelInterval*(c+1)),this.markPositions.push(b)};
X_CategoryAxis.prototype.calculateLabelPositions=function(){for(var a=this.markPixelInterval/2,b=this.markPositions.length-2,c=0;c<b;c+=2)this.labelPositions.push(this.markPositions[c]+a),this.labelPositions.push(this.markPositions[c+1]+5)};X_CategoryAxis.prototype.drawLabels=function(){for(var a=0;a<this.labelPositions.length;a+=2){var b=draw.createText(this.labelPositions[a],this.labelPositions[a+1],this.categoriesNames[a/2],!1,"middle","top");this.svg.appendChild(b)}};
X_CategoryAxis.prototype.analyzeReturn=function(){for(var a=[],b=0;b<this.labelPositions.length;b+=2)a.push(this.labelPositions[b]),a.push(this.labelPositions[b+1]-5);return{categoryBasePositions:a,columnWidth:8>this.markPixelInterval?4:40<this.markPixelInterval?40:this.markPixelInterval/2}};function TimeAxis(a,b,c,e,f,g){this.svg=a;this.originPosition=e;this.length=b;this.min=0;this.max=c;this.preferredMarkPixelInterval=100;this.markPixelInterval=this.markDataInterval=0;this.markPositions=[];this.labelPositions=[];this.originPosition=e;this.rightPadding=this.leftPadding=0;this.unit=f;this.interval=g}TimeAxis.prototype=new X_Axis;TimeAxis.prototype.constructor=TimeAxis;
TimeAxis.prototype.adjustMarkInterval=function(){var a=(this.max-this.min)/this.length*this.preferredMarkPixelInterval,b=a;switch(this.unit){case "s":case "m":this.preferredMarkDataIntervals=[1,2,5,10,15,30,60,120];break;case "h":this.preferredMarkDataIntervals=[1,2,3,6,12,24,48,72,96,168]}var c=this.preferredMarkDataIntervals[this.preferredMarkDataIntervals.length-1];if(a>c)a=c;else for(c=0;c<this.preferredMarkDataIntervals.length;c++)if(a<(this.preferredMarkDataIntervals[c]+util.pickFirstAvailable(this.preferredMarkDataIntervals[c+
1],this.preferredMarkDataIntervals[c]))/2){a=this.preferredMarkDataIntervals[c];break}this.markDataInterval=a;this.markPixelInterval=a/b*this.preferredMarkPixelInterval};TimeAxis.prototype.drawLabels=function(){for(var a=draw.createGroup(),b=this.min,c=0;c<this.labelPositions.length;c+=2){var e=b+this.markDataInterval*c/2,e=this.appendUnit(e);a.appendChild(draw.createText(this.labelPositions[c],this.labelPositions[c+1],e,11,"middle",!1))}this.svg.appendChild(a)};
TimeAxis.prototype.appendUnit=function(a){switch(this.unit){case "s":return 60===this.markDataInterval||120===this.markDataInterval?a/60+"m":a+"s";case "m":return 60===this.markDataInterval||120===this.markDataInterval?a/60+"h":a+"m"}};TimeAxis.prototype.analyzeReturn=function(){return{startPoint:this.originPosition[0]+this.leftPadding,length:this.length,pixelPerData:this.markPixelInterval/this.markDataInterval,min:this.min}};function Legend(a,b,c,e,f){this.svg=a;this.width=this.height=0;this.rowHeight=25;this.fontSize=15;this.multipleSeries=b;this.positionRelativeToLayout=c;this.shape=e;this.color=f;this.legendSVG_Group=draw.createGroup()}
Legend.prototype.analyze=function(a,b){if("none"!==this.positionRelativeToLayout){this.svg.appendChild(this.legendSVG_Group);var c=new RandomPicker,e;if(a)e=a;else{e=[];for(var f=0;f<this.multipleSeries.length;f++)e.push(this.multipleSeries[f][0])}if("left"===this.positionRelativeToLayout||"right"===this.positionRelativeToLayout)for(f=0;f<e.length;f++){var g=e[f],g=draw.createText(20,this.rowHeight*f+this.rowHeight/2,g,this.fontSize,"start","middle");this.legendSVG_Group.appendChild(g);if(void 0===
b||!0===b){var h=nodeDrawer.draw(util.pickFirstAvailable(this.shape,c.pickNodeShape()),util.pickFirstAvailable(this.color,c.pickSeriesColor()),10,this.rowHeight*f+this.rowHeight/2);this.legendSVG_Group.appendChild(h)}}if("top"===this.positionRelativeToLayout||"bottom"===this.positionRelativeToLayout)for(var p=0,f=0;f<e.length;f++){g=e[f];g=draw.createText(10+p,this.rowHeight/2,g,this.fontSize,"start","middle");this.legendSVG_Group.appendChild(g);if(void 0===b||!0===b)h=nodeDrawer.draw(util.pickFirstAvailable(this.shape,
c.pickNodeShape()),util.pickFirstAvailable(this.color,c.pickSeriesColor()),0+p,this.rowHeight/2),this.legendSVG_Group.appendChild(h);p=p+30+g.getBoundingClientRect().width}draw.setVisibility(this.legendSVG_Group,!1);this.width=this.legendSVG_Group.getBoundingClientRect().width;this.height=this.legendSVG_Group.getBoundingClientRect().height}};Legend.prototype.draw=function(a,b){a-=this.width/2;b-=this.height/2;draw.translate(this.legendSVG_Group,a,b);draw.setVisibility(this.legendSVG_Group,!0)};function Layout(){this.smallMargin=10;this.mediumMargin=20;this.bigMargin=50;this.mainTitleHeight=30;this.mainTitleFontSize=25;this.subTitleHeight=20;this.subTitleFontSize=15;this.yAxisTitleWidth=this.xAxisTitleHeight=20;this.yAxisTitleFontSize=this.xAxisTitleFontSize=15;this.xAxisHeight=20;this.yAxisWidth=30;this.areas=null}Layout.prototype.calculateHeightOfFixedTopMargin=function(){return this.smallMargin};
Layout.prototype.calculateHeightOfMainTitleComponent=function(){return util.chooseBetween(this.mainTitle,this.mainTitleHeight+this.smallMargin,0)};Layout.prototype.calculateHeightOfSubTitleComponent=function(){return util.chooseBetween(this.subTitle,this.subTitleHeight+this.smallMargin,0)};Layout.prototype.calculateHeightOfTopLegendComponent=function(){return util.chooseBetween("top"===this.legend.positionRelativeToLayout,this.legend.height+this.mediumMargin,0)};
Layout.prototype.calculateWidthOfLeftFixedMargin=function(){return this.smallMargin};Layout.prototype.calculateWidthOfLeftLegendComponent=function(){return util.chooseBetween("left"===this.legend.positionRelativeToLayout,this.legend.width+this.smallMargin,0)};Layout.prototype.calculateWidthOfYAxisTitleComponent=function(){return util.chooseBetween(this.yAxisTitle,this.yAxisTitleWidth+this.smallMargin,0)};Layout.prototype.calculateHeightOfFixedBottomMargin=function(){return this.smallMargin};
Layout.prototype.calculateHeightOfBottomLegendComponent=function(){return util.chooseBetween("bottom"===this.legend.positionRelativeToLayout,this.legend.height+this.smallMargin,0)};Layout.prototype.calculateHeightOfXAxisTitleComponent=function(){return util.chooseBetween(this.xAxisTitle,this.xAxisTitleHeight+this.smallMargin,0)};Layout.prototype.calculateWidthOfRightFixedMargin=function(){return this.smallMargin};
Layout.prototype.calculateWidthOfRightLegendComponent=function(){return util.chooseBetween("right"===this.legend.positionRelativeToLayout,this.legend.width+this.smallMargin,0)};
Layout.prototype.calculateOuterAreasSizes=function(){if(null!==this.areas)return this.areas;var a=this.calculateHeightOfFixedTopMargin()+this.calculateHeightOfMainTitleComponent()+this.calculateHeightOfSubTitleComponent()+this.calculateHeightOfTopLegendComponent(),b=this.calculateWidthOfLeftFixedMargin()+this.calculateWidthOfLeftLegendComponent()+this.calculateWidthOfYAxisTitleComponent(),c=this.calculateHeightOfFixedBottomMargin()+this.calculateHeightOfBottomLegendComponent()+this.calculateHeightOfXAxisTitleComponent(),
e=this.calculateWidthOfRightFixedMargin()+this.calculateWidthOfRightLegendComponent(),f=+this.svg.getAttribute("width"),g=+this.svg.getAttribute("height"),h={origin:[b,0],width:f-b-e,height:a},p={origin:[0,a],width:b,height:g-a-c-this.xAxisHeight};return this.areas={topArea:h,leftArea:p,rightArea:{origin:[f-e,a],width:e,height:p.height},bottomArea:{origin:[b,g-c],width:h.width,height:c}}};
Layout.prototype.analyze=function(){var a=this.calculateOuterAreasSizes();return{originPosition:[a.leftArea.width+this.yAxisWidth,a.topArea.height+a.leftArea.height],xAxisLength:a.topArea.width-this.yAxisWidth,yAxisLength:a.leftArea.height}};
Layout.prototype.drawTitles=function(){var a=this.calculateOuterAreasSizes(),b=a.topArea,c=a.leftArea,a=a.bottomArea;if(this.mainTitle){var e=b.origin[0]+b.width/2,f=this.calculateHeightOfFixedTopMargin()+this.mainTitleHeight/2;this.svg.appendChild(draw.createText(e,f,this.mainTitle,this.mainTitleFontSize,"middle","middle"))}this.subTitle&&(e=b.origin[0]+b.width/2,f=this.calculateHeightOfFixedTopMargin()+this.calculateHeightOfMainTitleComponent()+this.subTitleHeight/2,e=draw.createText(e,f,this.subTitle,
this.subTitleFontSize,"middle","middle"),draw.setStrokeFill(e,"none",!1,"#6E6F6F"),this.svg.appendChild(e));this.yAxisTitle&&(e=c.origin[0]+this.calculateWidthOfLeftFixedMargin()+this.calculateWidthOfLeftLegendComponent()+this.yAxisTitleWidth/2,f=b.height+c.height/2,b=draw.createText(e,f,this.yAxisTitle,this.yAxisTitleFontSize,"middle","middle"),draw.setStrokeFill(b,"none",!1,"#6E6F6F"),draw.rotate(b,e,f,-90),this.svg.appendChild(b));this.xAxisTitle&&(e=a.origin[0]+a.width/2,f=a.origin[1]+this.smallMargin+
this.xAxisTitleHeight/2,b=draw.createText(e,f,this.xAxisTitle,this.xAxisTitleFontSize,"middle","middle"),draw.setStrokeFill(b,"none",!1,"#6E6F6F"),this.svg.appendChild(b))};
Layout.prototype.drawLegend=function(){var a=this.calculateOuterAreasSizes();"left"===this.legend.positionRelativeToLayout&&this.legend.draw(a.leftArea.origin[0]+this.legend.width/2,a.leftArea.origin[1]+a.leftArea.height/2);"right"===this.legend.positionRelativeToLayout&&this.legend.draw(a.rightArea.origin[0]+this.legend.width/2,a.rightArea.origin[1]+a.rightArea.height/2);if("top"===this.legend.positionRelativeToLayout){var b=a.topArea.origin[0]+a.topArea.width/2,c=this.calculateHeightOfFixedTopMargin()+
this.calculateHeightOfMainTitleComponent()+this.calculateHeightOfSubTitleComponent()+this.legend.height/2;this.legend.draw(b,c)}"bottom"===this.legend.positionRelativeToLayout&&(b=a.bottomArea.origin[0]+a.bottomArea.width/2,c=a.bottomArea.origin[1]+this.calculateHeightOfXAxisTitleComponent()+this.smallMargin+this.legend.height/2,this.legend.draw(b,c))};Layout.prototype.draw=function(){this.drawTitles();this.drawLegend()};function GeneralLayout(a,b,c,e,f,g){this.svg=a;this.mainTitle=b;this.subTitle=c;this.yAxisTitle=e;this.xAxisTitle=f;this.legend=g}GeneralLayout.prototype=new Layout;GeneralLayout.prototype.constructor=GeneralLayout;GeneralLayout.prototype.calculateHeightOfFixedTopMargin=function(){return this.mainTitle||this.subTitle?!this.mainTitle&&this.subTitle?this.mediumMargin:this.smallMargin:this.bigMargin};function LayoutNoAxes(a,b,c,e){this.svg=a;this.mainTitle=b;this.subTitle=c;this.xAxisTitle=this.yAxisTitle=void 0;this.yAxisWidth=this.xAxisHeight=0;this.legend=e}LayoutNoAxes.prototype=new Layout;LayoutNoAxes.prototype.constructor=LayoutNoAxes;
LayoutNoAxes.prototype.analyze=function(){var a=this.calculateOuterAreasSizes(),b=[a.leftArea.width+this.yAxisWidth,a.topArea.height+a.leftArea.height],c=a.leftArea.height,a=a.topArea.width-this.yAxisWidth,e;e=(a<c?a/2:c/2)-9.5;e=[e,e-30,e-20];return{dataDrawAreaX:a,dataDrawAreaY:c,center:[b[0]+a/2,b[1]-c/2],radiusForLabel:e[0],radiusForPie:e[1],radiusForConnectionLine:e[2]}};function MultipleLegendLayout(a,b,c,e){this.svg=a;this.mainTitle=b;this.subTitle=c;this.xAxisTitle=this.yAxisTitle=void 0;this.yAxisWidth=this.xAxisHeight=0;this.legendList=e}MultipleLegendLayout.prototype=new Layout;MultipleLegendLayout.prototype.constructor=MultipleLegendLayout;MultipleLegendLayout.prototype.calculateHeightOfFixedTopMargin=function(){return this.mainTitle||this.subTitle?!this.mainTitle&&this.subTitle?this.mediumMargin:this.smallMargin:this.bigMargin};
MultipleLegendLayout.prototype.calculateHeightOfTopLegendComponent=function(){for(var a=0;a<this.legendList.length;a++)if("top"===this.legendList[a].positionRelativeToLayout)return this.legendList[a].height+this.mediumMargin;return 0};MultipleLegendLayout.prototype.calculateWidthOfLeftLegendComponent=function(){for(var a=0;a<this.legendList.length;a++)if("left"===this.legendList[a].positionRelativeToLayout)return this.legendList[a].width+this.smallMargin;return 0};
MultipleLegendLayout.prototype.calculateHeightOfBottomLegendComponent=function(){for(var a=0;a<this.legendList.length;a++)if("bottom"===this.legendList[a].positionRelativeToLayout)return this.legendList[a].height+this.smallMargin;return 0};
MultipleLegendLayout.prototype.calculateWidthOfRightLegendComponent=function(){for(var a=0;a<this.legendList.length;a++)if("right"===this.legendList[a].positionRelativeToLayout)return console.log(this.legendList[a].width+this.smallMargin),this.legendList[a].width+this.smallMargin;return 0};
MultipleLegendLayout.prototype.analyze=function(){var a=this.calculateOuterAreasSizes();return{originPosition:[a.leftArea.width+this.yAxisWidth,a.topArea.height+a.leftArea.height],dataDrawAreaX:a.topArea.width-this.yAxisWidth,dataDrawAreaY:a.leftArea.height}};
MultipleLegendLayout.prototype.drawLegend=function(){for(var a=this.calculateOuterAreasSizes(),b=0;b<this.legendList.length;b++){"left"===this.legendList[b].positionRelativeToLayout&&this.legendList[b].draw(a.leftArea.origin[0]+this.legendList[b].width/2,a.leftArea.origin[1]+a.leftArea.height/2);"right"===this.legendList[b].positionRelativeToLayout&&this.legendList[b].draw(a.rightArea.origin[0]+this.legendList[b].width/2,a.rightArea.origin[1]+a.rightArea.height/2);if("top"===this.legendList[b].positionRelativeToLayout){var c=
a.topArea.origin[0]+a.topArea.width/2,e=this.calculateHeightOfFixedTopMargin()+this.calculateHeightOfMainTitleComponent()+this.calculateHeightOfSubTitleComponent()+this.legendList[b].height/2;this.legendList[b].draw(c,e)}"bottom"===this.legendList[b].positionRelativeToLayout&&(c=a.bottomArea.origin[0]+a.bottomArea.width/2,e=a.bottomArea.origin[1]+this.calculateHeightOfXAxisTitleComponent()+this.smallMargin+this.legendList[b].height/2,this.legendList[b].draw(c,e))}};var dataAnalystCommons={isContinual:function(a,b){return 20>a/b?!0:!1}};function BasicLineIrregularDataAnalyst(a,b){this.input=a;this.xAxisDataAreaLength=b}BasicLineIrregularDataAnalyst.prototype.analyze=function(){for(var a=this.input.series,b=a[0][1][1][0],c=a[0][1][1][0],e=a[0][1][1][1],f=a[0][1][1][1],g=0,h=0;h<a.length;h++){for(var p=a[h][1],l=0;l<p.length;l++){var m=p[l];m[0]<b&&(b=m[0]);m[0]>c&&(c=m[0]);m[1]<e&&(e=m[1]);m[1]>f&&(f=m[1])}p.length>g&&(g=p.length)}a=dataAnalystCommons.isContinual(this.xAxisDataAreaLength,g);return{minX:b,maxX:c,minY:e,maxY:f,isContinual:a}};function BasicCategoryDataAnalyst(a){this.input=a;this.results=null}BasicCategoryDataAnalyst.prototype.analyze=function(){if(null!==this.results)return this.results;for(var a=0,b=0,c=this.input.series,e=[],f=0;f<c.length;f++){e.push(c[f][0]);var g=c[f][1];g<a&&(a=g);g>b&&(b=g)}return this.results={minY:a,maxY:b,seriesNames:e}};function BasicLineRegularDataAnalyst(a,b){this.input=a;this.xAxisDataAreaLength=b}BasicLineRegularDataAnalyst.prototype.analyze=function(){for(var a=null,b=null,c=null,e=!1,f=0;f<this.input.series.length;f++){var g=this.analyzeSingleSeries(this.input.series[f][1]);null===a&&(a=g.maxX);null===b?b=g.minY:b>g.minY&&(b=g.minY);null===c?c=g.maxY:c<g.maxY&&(c=g.maxY);g.isContinual&&(e=!0)}return{minX:this.input.start,maxX:a,minY:b,maxY:c,isContinual:e}};
BasicLineRegularDataAnalyst.prototype.analyzeSingleSeries=function(a){for(var b=a[0],c=a[0],e=util.chooseBetween(void 0===this.input.start,0,this.input.start)+(a.length-1)*this.input.interval,f=a.length,g=0;g<a.length;g++)a[g]>c&&(c=a[g]),a[g]<b&&(b=a[g]);a=dataAnalystCommons.isContinual(this.xAxisDataAreaLength,f);return{maxX:e,minY:b,maxY:c,isContinual:a}};function BasicStackRegularDataAnalyst(a,b){this.input=a;this.xAxisDataAreaLength=b}
BasicStackRegularDataAnalyst.prototype.analyze=function(){for(var a=0,b=0,c=this.input.series[0][1].length,e=0;e<c;e++)for(var f=0,g=0;g<this.input.series.length;g++)f+=this.input.series[g][1][e],f<a&&(a=f),f>b&&(b=f);e=dataAnalystCommons.isContinual(this.xAxisDataAreaLength,c);c=util.chooseBetween(void 0===this.input.start,0,this.input.start)+(c-1)*this.input.interval;return{minX:this.input.start,maxX:c,minY:a,maxY:b,isContinual:e}};function BasicPieDataAnalyst(a){this.input=a}BasicPieDataAnalyst.prototype.analyze=function(){for(var a=0,b=0;b<this.input.series.length;b++)a+=this.input.series[b][1];return{total:a}};function RandomPicker(){this.seriesColors="blue green red lightBlue darkGreen yellow purple".split(" ");this.currentSeriesColorIndex=0;this.nodeShape=["circle","rectangular","triangle","reverse-triangle"];this.currentNodeShapeIndex=0}RandomPicker.prototype.pickSeriesColor=function(){var a=this.seriesColors[this.currentSeriesColorIndex];this.currentSeriesColorIndex===this.seriesColors.length-1?this.currentSeriesColorIndex=0:this.currentSeriesColorIndex++;return colors[a]};
RandomPicker.prototype.pickNodeShape=function(){var a=this.nodeShape[this.currentNodeShapeIndex];this.currentNodeShapeIndex===this.nodeShape.length-1?this.currentNodeShapeIndex=0:this.currentNodeShapeIndex++;return a};var nodeDrawer={draw:function(a,b,c,e){switch(a){case "circle":return this.drawCircleNode(b,c,e,4,1);case "rectangular":return this.drawRectangularNode(b,c,e,8,8,1);case "triangle":return this.drawTriangleNode(b,c,e,5,1);case "reverse-triangle":return this.drawReverseTriangleNode(b,c,e,5,1)}},drawHighlightedNode:function(a,b){switch(a){case "circle":return this.drawCircleNode(b,0,0,6,3);case "rectangular":return this.drawRectangularNode(b,0,0,12,12,3);case "triangle":return this.drawTriangleNode(b,
0,0,7,3);case "reverse-triangle":return this.drawReverseTriangleNode(b,0,0,7,3)}},drawCircleNode:function(a,b,c,e,f){b=draw.createCircle(b,c,e);draw.setStrokeFill(b,a.strokeColor,f,a.fillColor);return b},drawRectangularNode:function(a,b,c,e,f,g){b-=e/2;c-=f/2;b=draw.createPath("M"+b+" "+c+" "+(b+e)+" "+c+" "+(b+e)+" "+(c+f)+" "+b+" "+(c+f)+"Z");draw.setStrokeFill(b,a.strokeColor,g,a.fillColor);return b},drawTriangleNode:function(a,b,c,e,f){var g=e*Math.sin(Math.PI/6),h=e*Math.cos(Math.PI/6);e=(e+
g)/2;b=draw.createPath("M"+b+" "+(c-e)+" "+(b-h)+" "+(c+e)+" "+(b+h)+" "+(c+e)+"Z");draw.setStrokeFill(b,a.strokeColor,f,a.fillColor);return b},drawReverseTriangleNode:function(a,b,c,e,f){var g=e*Math.sin(Math.PI/6),h=e*Math.cos(Math.PI/6);e=(e+g)/2;b=draw.createPath("M"+(b-h)+" "+(c-e)+" "+(b+h)+" "+(c-e)+" "+b+" "+(c+e)+"Z");draw.setStrokeFill(b,a.strokeColor,f,a.fillColor);return b},drawTrigger:function(a,b,c){a=draw.createCircle(a,b,10);draw.setStrokeFill(a,!1,!1,"rgba(0,0,0,0)");a.ws_nodesStrideIdx=
c;return a}};function TipControl(a,b,c){this.tip=null;this.hideTipTimeout=0;this.isShown=!1;this.isSingleLine=c;this.htmlContainer=a;this.topShift=b;this.sharedSeriesInfo=new SharedSeriesInfo}
TipControl.prototype.createTip=function(a,b){var c=document.createElement("div");this.tip=c;if(this.isSingleLine)if(null!==a&&void 0!==a)a(c);else{var e=document.createElement("span");c.appendChild(e);e.appendChild(document.createTextNode("null"));c.appendChild(document.createTextNode(" -- "));e=document.createElement("span");c.appendChild(e);e.appendChild(document.createTextNode("null"))}else null!==b&&void 0!==b?b(c):(c.appendChild(document.createTextNode("null")),c.appendChild(document.createElement("br")),
c.appendChild(document.createTextNode("null")));c.setAttribute("class","mc-tip");this.htmlContainer.appendChild(c);e=c.getBoundingClientRect();c.style.marginTop=-e.height-2-this.topShift+"px";c.style.borderColor="black";c.style.display="none";c.style.webkitTransitionDuration="0.3s";c.style.MozTransitionDuration="0.3s";c.style.transitionDuration="0.3s"};TipControl.prototype.showTip=function(a,b,c,e){this.isSingleLine?this.showSingleLineTip(a,b,c,e):this.showDoubleLineTip(a,b,c,e)};
TipControl.prototype.showSingleLineTip=function(a,b,c,e){var f=this.sharedSeriesInfo.getSeriesName(c),g=this.sharedSeriesInfo.getSeriesMCcolor(c);c=this.sharedSeriesInfo.getDataY(c,e);this.genericShowTip(a,b,f,g,0,c)};TipControl.prototype.showDoubleLineTip=function(a,b,c,e){var f=this.sharedSeriesInfo.getSeriesName(c),g=this.sharedSeriesInfo.getSeriesMCcolor(c),h=this.sharedSeriesInfo.getDataX(c,e);c=this.sharedSeriesInfo.getDataY(c,e);this.genericShowDoubleLineTip(a,b,f,g,h,c)};
TipControl.prototype.genericShowTip=function(a,b,c,e,f,g){this.isSingleLine?this.genericShowSingleLineTip(a,b,c,e,g):this.genericShowDoubleLineTip(a,b,c,e,f,g)};TipControl.prototype.genericShowSingleLineTip=function(a,b,c,e,f){this.tip.childNodes[0].childNodes[0].nodeValue=c;this.tip.childNodes[2].childNodes[0].nodeValue=f;this.applyTranslationAndColor(a,b,e)};
TipControl.prototype.genericShowDoubleLineTip=function(a,b,c,e,f,g){this.tip.childNodes[0].nodeValue=c;this.tip.childNodes[2].nodeValue=f+" -- "+g;this.applyTranslationAndColor(a,b,e)};TipControl.prototype.genericShowDoubleLineTipDataYOnly=function(a,b,c,e,f){this.tip.childNodes[0].nodeValue=c;this.tip.childNodes[2].nodeValue=f;this.applyTranslationAndColor(a,b,e)};
TipControl.prototype.applyTranslationAndColor=function(a,b,c){0!==this.hideTipTimeout&&window.clearTimeout(this.hideTipTimeout);this.isShown?(this.tip.style.webkitTransitionProperty="-webkit-transform",this.tip.style.MozTransitionProperty="-moz-transform",this.tip.style.transitionProperty="transform"):(this.isShown=!0,this.tip.style.webkitTransitionProperty="none",this.tip.style.MozTransitionProperty="none",this.tip.style.transitionProperty="none",this.tip.style.display="inline-block");var e=this.tip.getBoundingClientRect();
a="translate("+(a-e.width/2)+"px, "+b+"px)";this.tip.style.MozTransform=a;this.tip.style.webkitTransform=a;this.tip.style.msTransform=a;this.tip.style.transform=a;this.tip.style.borderColor=c.strokeColor};TipControl.prototype.hideTip=function(){var a=this;0!==this.hideTipTimeout&&window.clearTimeout(this.hideTipTimeout);this.hideTipTimeout=window.setTimeout(function(){a.isShown=!1;a.tip.style.display="none";a.hideTipTimeout=0},1E3)};
TipControl.prototype.hideTipImmediately=function(){0!==this.hideTipTimeout&&window.clearTimeout(this.hideTipTimeout);this.isShown=!1;this.tip.style.display="none";this.hideTipTimeout=0};function TriggerControl(a,b,c){this.tipControl=a;this.seriesName=b;this.mcColor=c;this.sharedSeriesInfo=this.tipControl.sharedSeriesInfo}
TriggerControl.prototype.enableColumnTrigger=function(a,b,c,e,f){var g=this,h=this.sharedSeriesInfo.registerSingleSeries(c,e,null,f);a.addEventListener("mouseover",function(a){var c=g.sharedSeriesInfo.getPixelX(h,0),e=a.clientY-b.getBoundingClientRect().top;g.tipControl.showTip(c,e,h,0);a.stopPropagation()});a.addEventListener("mouseout",function(a){g.tipControl.hideTip();a.stopPropagation()})};
TriggerControl.prototype.enableNodeTrigger=function(a,b,c,e,f){var g=this.sharedSeriesInfo,h=g.registerSingleSeries(b,c,e,f),p=this,l=!1;a.addEventListener("mouseover",function(a){var c=g.getPixelX(h,a.target.ws_nodesStrideIdx),b=g.getPixelY(h,a.target.ws_nodesStrideIdx);l||(draw.setVisibility(e,!0),l=!0);draw.translate(e,c,b);p.tipControl.showTip(c,b,h,a.target.ws_nodesStrideIdx);a.stopPropagation()});a.addEventListener("mouseout",function(a){l&&(draw.setVisibility(e,!1),l=!1);p.tipControl.hideTip();
a.stopPropagation()})};
TriggerControl.prototype.enableRoutineTrace=function(a,b,c,e,f,g,h){var p=this.sharedSeriesInfo.registerSingleSeries(b,c,null,e),l=this,m=-1,q=0,k=0,t;if(!1!==g)t=function(){var d=(q-a.getBoundingClientRect().left-h.startPoint)/h.pixelPerData+h.min,d=Math.round((d-h.min)/g);if(d!==m){m=d;var n=l.sharedSeriesInfo.getPixelX(p,d),N=l.sharedSeriesInfo.getPixelY(p,d);l.tipControl.showTip(n,N,p,d)}};else{var r=[];for(b=0;b<e.length;b+=4)r.push(e[b+2]);t=function(){var d=(q-a.getBoundingClientRect().left-h.startPoint)/
h.pixelPerData+h.min,d=util.findElementIdxUsingBinarySearch(r,d);if(d!==m){m=d;var n=l.sharedSeriesInfo.getPixelX(p,d),N=l.sharedSeriesInfo.getPixelY(p,d);l.tipControl.showTip(n,N,p,d)}}}f.addEventListener("mousemove",function(d){q=d.clientX});f.addEventListener("mouseover",function(d){m=-1;q=d.clientX;t();k=window.setInterval(t,200)});f.addEventListener("mouseout",function(){window.clearInterval(k);l.tipControl.hideTip()})};function SharedSeriesInfo(){this.multipleSeries=[]}SharedSeriesInfo.prototype.registerSingleSeries=function(a,b,c,e){var f=Array(4);f[0]=a;f[1]=b;f[2]=c;f[3]=e;this.multipleSeries.push(f);return this.multipleSeries.length-1};SharedSeriesInfo.prototype.getSeriesName=function(a){return this.multipleSeries[a][0]};SharedSeriesInfo.prototype.getSeriesMCcolor=function(a){return this.multipleSeries[a][1]};SharedSeriesInfo.prototype.getHighlightedNode=function(a){return this.multipleSeries[a][2]};
SharedSeriesInfo.prototype.getDataX=function(a,b){return this.multipleSeries[a][3][4*b+2]};SharedSeriesInfo.prototype.getDataY=function(a,b){return this.multipleSeries[a][3][4*b+3]};SharedSeriesInfo.prototype.getPixelX=function(a,b){return this.multipleSeries[a][3][4*b]};SharedSeriesInfo.prototype.getPixelY=function(a,b){return this.multipleSeries[a][3][4*b+1]};SharedSeriesInfo.prototype.reverse=function(){this.multipleSeries.reverse()};function SharedTipControl(a,b){this.htmlContainer=a;this.topShift=b;this.isSingleLine=!1;this.sharedSeriesInfo=new SharedSeriesInfo}SharedTipControl.prototype=new TipControl;SharedTipControl.prototype.constructor=SharedTipControl;
SharedTipControl.prototype.createTip=function(a){TipControl.prototype.createTip.call(this,function(a){},function(b){var c=document.createTextNode("null");b.appendChild(c);b.ws_dataXslot=c;b.ws_dataYslots=[];for(c=0;c<a.length;c++){var e=document.createElement("div");b.appendChild(e);var f=document.createElement("span");e.appendChild(f);f.appendChild(document.createTextNode(a[c]));e.appendChild(document.createTextNode(" -- "));f=document.createElement("span");e.appendChild(f);e=document.createTextNode("null");
f.appendChild(e);b.ws_dataYslots.push(e)}})};SharedTipControl.prototype.showSingleLineTip=function(){};SharedTipControl.prototype.showDoubleLineTip=function(a,b,c,e){var f=this.sharedSeriesInfo.getSeriesMCcolor(c);c=this.sharedSeriesInfo.getDataX(c,e);this.tip.ws_dataXslot.nodeValue=c;for(c=0;c<this.tip.ws_dataYslots.length;c++)this.tip.ws_dataYslots[c].nodeValue=this.sharedSeriesInfo.getDataY(c,e);this.applyTranslationAndColor(a,b,f)};function PieSliceTriggerControl(){}PieSliceTriggerControl.prototype.enablePieSliceTrigger=function(a,b,c,e,f,g){a.addEventListener("mouseover",function(){c.genericShowTip(b[0],b[1],e,f,0,g)});a.addEventListener("mouseout",function(){c.hideTip()})};function StaticTipControl(a,b,c){this.htmlContainer=a;this.topShift=b;this.isSingleLine=c}StaticTipControl.prototype=new TipControl;StaticTipControl.prototype.constructor=StaticTipControl;
StaticTipControl.prototype.createTip=function(a,b){var c=document.createElement("div");this.tip=c;if(this.isSingleLine)if(null!==a&&void 0!==a)a(c);else{var e=document.createElement("span");c.appendChild(e);e.appendChild(document.createTextNode("null"));c.appendChild(document.createTextNode(" -- "));e=document.createElement("span");c.appendChild(e);e.appendChild(document.createTextNode("null"))}else null!==b&&void 0!==b?b(c):(c.appendChild(document.createTextNode("null")),c.appendChild(document.createElement("br")),
c.appendChild(document.createTextNode("null")));c.setAttribute("class","mc-tip");this.htmlContainer.appendChild(c);e=c.getBoundingClientRect();c.style.marginTop=-e.height-2-this.topShift+"px";c.style.borderColor="black";c.style.display="none"};
StaticTipControl.prototype.applyTranslationAndColor=function(a,b,c){this.tip.style.display="inline-block";var e=this.tip.getBoundingClientRect();a="translate("+(a-e.width/2)+"px, "+b+"px)";this.tip.style.MozTransform=a;this.tip.style.webkitTransform=a;this.tip.style.msTransform=a;this.tip.style.transform=a;this.tip.style.borderColor=c.strokeColor};StaticTipControl.prototype.hideTip=function(){this.hideTipImmediately()};
StaticTipControl.prototype.hideTipImmediately=function(){this.tip.style.display="none"};function SingleColumnViewer(){}SingleColumnViewer.prototype.draw=function(a,b,c,e,f,g,h,p,l,m,q,k){k=(f-k.min)*k.pixelPerData;var t=draw.createRectangular(a-c/2,b-k,c,k);draw.setStrokeFill(t,g.strokeColor,2,g.fillColor);p.appendChild(t);this.enableColumnTip(a,b,c,k,e,f,g,h,l,m,q)};
SingleColumnViewer.prototype.enableColumnTip=function(a,b,c,e,f,g,h,p,l,m,q){a=draw.createRectangular(a-c/2,b-e,c,e);draw.setStrokeFill(a,!1,!1,"rgb(0,0,0)");draw.setVisibility(a,!1);a.setAttributeNS(null,"pointer-events","fill");(new TriggerControl(m,f,h)).enableColumnTrigger(a,q,f,h,p);l.appendChild(a)};function SingleLineSeriesViewer(a,b,c,e,f,g,h,p,l,m,q,k){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.nodes=e;this.nodeShape=f;this.mcColor=g;this.constantInterval=p;this.isContinual=h;this.seriesName=l;this.xDrawInfo=q;this.yDrawInfo=k;this.svgLayerGroup=draw.createGroup();this.svgTriggerGroup=draw.createGroup();this.tipControl=m}
SingleLineSeriesViewer.prototype.draw=function(){this.svgLayerGroup.appendChild(this.drawLine());this.drawNodes();var a=this.drawHighlightNode();this.enableNodeTrigger(a);this.enableRoutineTrace();this.svg.appendChild(this.svgLayerGroup);this.svgTrigger.appendChild(this.svgTriggerGroup)};SingleLineSeriesViewer.prototype.drawLine=function(){var a=draw.createStraightLines(this.nodes,4,0);draw.setStrokeFill(a,this.mcColor.strokeColor,2,"none");return a};
SingleLineSeriesViewer.prototype.drawNodes=function(){if(!this.isContinual){for(var a=draw.createGroup(),b=0;b<this.nodes.length;b+=4){var c=nodeDrawer.draw(this.nodeShape,this.mcColor,this.nodes[b],this.nodes[b+1]);a.appendChild(c)}this.svgLayerGroup.appendChild(a)}};SingleLineSeriesViewer.prototype.drawHighlightNode=function(){var a=nodeDrawer.drawHighlightedNode(this.nodeShape,this.mcColor);draw.setVisibility(a,!1);this.svgLayerGroup.appendChild(a);return a};
SingleLineSeriesViewer.prototype.enableNodeTrigger=function(a){if(!this.isContinual){for(var b=draw.createGroup(),c=0;c<this.nodes.length;c+=4){var e=nodeDrawer.drawTrigger(this.nodes[c],this.nodes[c+1],c/4);b.appendChild(e)}this.svgTriggerGroup.appendChild(b);(new TriggerControl(this.tipControl,this.seriesName,this.mcColor)).enableNodeTrigger(b,this.seriesName,this.mcColor,a,this.nodes)}};
SingleLineSeriesViewer.prototype.enableRoutineTrace=function(a){this.isContinual&&(a=draw.createStraightLines(this.nodes,4,0),draw.setStrokeFill(a,this.mcColor.strokeColor,20,"none"),draw.setVisibility(a,!1),a.setAttributeNS(null,"pointer-events","stroke"),this.svgTriggerGroup.appendChild(a),(new TriggerControl(this.tipControl,this.seriesName,this.mcColor)).enableRoutineTrace(this.htmlContainer,this.seriesName,this.mcColor,this.nodes,a,this.constantInterval,this.xDrawInfo))};function SingleStackSeriesViewer(a,b,c,e,f,g,h,p,l,m,q,k,t,r){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.nodes=e;this.nodeShape=f;this.mcColor=g;this.constantInterval=p;this.isContinual=h;this.seriesName=l;this.xDrawInfo=q;this.yDrawInfo=k;this.lineWidth=t;this.isLinearGradient=r;this.svgLayerGroup=draw.createGroup();this.svgTriggerGroup=draw.createGroup();this.tipControl=m}SingleStackSeriesViewer.prototype=new SingleLineSeriesViewer;SingleStackSeriesViewer.prototype.constructor=SingleStackSeriesViewer;
SingleStackSeriesViewer.prototype.draw=function(){this.svgLayerGroup.appendChild(this.drawStack());this.svgLayerGroup.appendChild(this.drawLine());this.drawLine();this.drawNodes();var a=this.drawHighlightNode();this.enableRoutineTrace(a);this.enableNodeTrigger(a);this.svg.appendChild(this.svgLayerGroup);this.svgTrigger.appendChild(this.svgTriggerGroup)};
SingleStackSeriesViewer.prototype.drawLine=function(){var a=draw.createStraightLines(this.nodes,4,0);draw.setStrokeFill(a,this.mcColor.strokeColor,this.lineWidth,"none");return a};
SingleStackSeriesViewer.prototype.drawStack=function(){var a=draw.createStackWithStraightLines(this.nodes,4,0,[this.xDrawInfo.startPoint+this.xDrawInfo.length,this.yDrawInfo.startPoint-.5],[this.xDrawInfo.startPoint,this.yDrawInfo.startPoint-.5]);this.isLinearGradient?draw.setStrokeFill(a,!1,!1,this.mcColor.linearGradientFill):draw.setStrokeFill(a,!1,!1,this.mcColor.fillColor);return a};
SingleStackSeriesViewer.prototype.enableNodeTrigger=function(){if(!this.isContinual){var a=nodeDrawer.drawHighlightedNode(this.nodeShape,this.mcColor);draw.setVisibility(a,!1);this.svgLayerGroup.appendChild(a);for(var b=draw.createGroup(),c=0;c<this.nodes.length;c+=4){var e=nodeDrawer.drawTrigger(this.nodes[c],this.nodes[c+1],c/4);b.appendChild(e)}this.svgTriggerGroup.appendChild(b);(new TriggerControl(this.tipControl,this.seriesName,this.mcColor)).enableNodeTrigger(b,this.seriesName,this.mcColor,
a,this.nodes)}};SingleStackSeriesViewer.prototype.enableRoutineTrace=function(){var a=this.drawStack();draw.setStrokeFill(a,!1,!1,"rgb(0,0,0)");draw.setVisibility(a,!1);a.setAttributeNS(null,"pointer-events","fill");this.svgTriggerGroup.appendChild(a);(new TriggerControl(this.tipControl,this.seriesName,this.mcColor)).enableRoutineTrace(this.htmlContainer,this.seriesName,this.mcColor,this.nodes,a,this.constantInterval,this.xDrawInfo)};function SingleTimeSeriesViewer(a,b,c,e,f,g,h,p,l,m,q,k,t,r){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.nodes=e;this.nodeShape=f;this.mcColor=g;this.constantInterval=p;this.isContinual=h;this.seriesName=l;this.xDrawInfo=q;this.yDrawInfo=k;this.lineWidth=t;this.isLinearGradient=r;this.svgLayerGroup=draw.createGroup();this.svgTriggerGroup=draw.createGroup();this.tipControl=m}SingleTimeSeriesViewer.prototype=new SingleStackSeriesViewer;SingleTimeSeriesViewer.prototype.constructor=SingleTimeSeriesViewer;
SingleTimeSeriesViewer.prototype.drawHighlightNode=function(){return null};function PieDataLabelSlotsController(){this.leftSlots=[];this.rightSlots=[]}PieDataLabelSlotsController.prototype.generateEmptySlots=function(a,b,c,e){function f(e){for(var f=[],p=2*c,l=0,m=Math.pow(c,2);0<p-(a*l+a/5);){var q=a*l+a/5,k=Math.pow(c-q,2),k=Math.sqrt(m-k),k=e?b[0]-k:b[0]+k,q=b[1]+(q-c);f.push(l);f.push(k);f.push(q);f.push(!1);l++}return f}this.leftSlots=f(!0);this.rightSlots=f(!1)};
PieDataLabelSlotsController.prototype.processConnectorInfo=function(a,b){function c(c,b){for(var e=-1,f=[],g=c-1;0<g;g--)if(f.push(a[g]),1<a[g].slotIdx-a[g-1].slotIdx){e=a[g].slotIdx;break}for(g=0;g<f.length;g++)--f[g].slotIdx;b[e+3]=!0;c.slotIdx=b.length-1}(function(a){a.sort(function(a,c){return a.position[1]<c.position[1]?-1:1})})(a);var e;e=b?this.leftSlots:this.rightSlots;for(var f=0;f<a.length;f++){var g=a[f],h=this.findNearestAvailableSlotIdx(g.position[0],g.position[1],e);-1!==h?g.slotIdx=
h:c(f)}return a};PieDataLabelSlotsController.prototype.findNearestAvailableSlotIdx=function(a,b,c){for(var e=-1,f=1E4,g=0;g<c.length;g+=4)if(!c[g+3]){var h;h=b;var p=c[g+2];h=Math.sqrt(Math.pow(c[g+1]-a,2)+Math.pow(p-h,2));h<f&&(f=h,e=g)}if(-1===e)return-1;c[e+3]=!0;return e/4};
PieDataLabelSlotsController.prototype.createConnectionLine=function(a){var b;b=a.isLeft?this.leftSlots:this.rightSlots;b=draw.createQuadraticBezierCurve([a.position[0],a.position[1],a.connectionLineTurnPos[0],a.connectionLineTurnPos[1],b[4*a.slotIdx+1],b[4*a.slotIdx+2]]);draw.setStrokeFill(b,a.mcColor.strokeColor,1,"none");return b};
PieDataLabelSlotsController.prototype.createTextInSlot=function(a,b,c){var e;if(c)return e=this.leftSlots,draw.createText(e[4*b+1]-5,e[4*b+2],a,14,c?"end":"start","middle");e=this.rightSlots;return draw.createText(e[4*b+1]+5,e[4*b+2],a,14,c?"end":"start","middle")};function SinglePieSeriesViewer(a,b,c,e,f,g,h,p,l,m,q,k,t,r){this.svg=a;this.htmlContainer=b;this.tipControl=c;this.svgTrigger=e;this.startAngle=f;this.endAngle=g;this.radiusForLabel=h;this.radiusForPie=p;this.radiusForConnectionLineTurn=l;this.center=m;this.seriesName=q;this.mcColor=k;this.dataY=t;this.slotsController=r}
SinglePieSeriesViewer.prototype.draw=function(){var a=draw.createArcOfCircle(this.center[0],this.center[1],this.radiusForPie,this.startAngle,this.endAngle);draw.setStrokeFill(a,"white",1.5,this.mcColor.fillColor);this.svg.appendChild(a);this.enablePieSliceTrigger()};
SinglePieSeriesViewer.prototype.getConnectorInfo=function(){var a=util.polarToCartesian(this.center[0],this.center[1],this.radiusForPie,(this.endAngle+this.startAngle)/2),b=util.polarToCartesian(this.center[0],this.center[1],this.radiusForConnectionLineTurn,(this.endAngle+this.startAngle)/2),c=!1;a[0]<this.center[0]&&(c=!0);return{position:a,connectionLineTurnPos:b,isLeft:c,slotIdx:-1,text:this.seriesName+": "+this.dataY,mcColor:this.mcColor}};
SinglePieSeriesViewer.prototype.enablePieSliceTrigger=function(){var a=draw.createArcOfCircle(this.center[0],this.center[1],this.radiusForPie,this.startAngle,this.endAngle);draw.setStrokeFill(a,!1,!1,"white");draw.setVisibility(a,!1);draw.setPointerEvent(a,!0,!1);this.svgTrigger.appendChild(a);var b=util.polarToCartesian(this.center[0],this.center[1],this.radiusForPie/2,(this.endAngle+this.startAngle)/2);(new PieSliceTriggerControl).enablePieSliceTrigger(a,b,this.tipControl,this.seriesName,this.mcColor,
this.dataY)};function BasicLineIrregularDataViewer(a,b,c,e,f,g,h){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.input=e;this.xDrawInfo=f;this.yDrawInfo=g;this.topTip=null;this.isContinual=h}
BasicLineIrregularDataViewer.prototype.draw=function(){var a=new TipControl(this.htmlContainer,7,!1);a.createTip();for(var b=this.input.series,c=new RandomPicker,e=draw.createGroup(),f=draw.createGroup(),g=0;g<b.length;g++){var h=b[g][0],p=this.analyzeSingleSeriesData(b[g][1]),l=c.pickSeriesColor(),m=c.pickNodeShape();(new SingleLineSeriesViewer(this.htmlContainer,e,f,p,m,l,this.isContinual,!1,h,a,this.xDrawInfo,this.yDrawInfo)).draw()}this.svg.appendChild(e);this.svgTrigger.appendChild(f)};
BasicLineIrregularDataViewer.prototype.analyzeSingleSeriesData=function(a){for(var b=[],c=0;c<a.length;c++){var e=this.yDrawInfo.startPoint-(a[c][1]-this.yDrawInfo.min)*this.yDrawInfo.pixelPerData;b.push(this.xDrawInfo.startPoint+(a[c][0]-this.xDrawInfo.min)*this.xDrawInfo.pixelPerData);b.push(e);b.push(a[c][0]);b.push(a[c][1])}return b};function BasicCategoryDataViewer(a,b,c,e,f,g){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.input=e;this.xDrawInfo=f;this.yDrawInfo=g}
BasicCategoryDataViewer.prototype.draw=function(){var a=new RandomPicker,b=draw.createGroup(),c=draw.createGroup(),e=new TipControl(this.htmlContainer,7,!0);e.createTip();for(var f=0;f<this.xDrawInfo.categoryBasePositions.length;f+=2){var g=[this.xDrawInfo.categoryBasePositions[f],this.xDrawInfo.categoryBasePositions[f+1],0,this.input.series[f/2][1]],h=this.input.series[f/2][0];(new SingleColumnViewer).draw(g[0],g[1],this.xDrawInfo.columnWidth,h,g[3],a.pickSeriesColor(),g,b,c,e,this.htmlContainer,
this.yDrawInfo)}this.svg.appendChild(b);this.svgTrigger.appendChild(c)};function BasicSingleTimeData(a,b,c,e,f,g,h){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.input=e;this.xDrawInfo=f;this.yDrawInfo=g;this.topTip=null;this.isContinual=h}
BasicSingleTimeData.prototype.draw=function(){var a=this.input.series[0][0],b=this.analyzeSingleSeriesData(this.input.series[0][1]),c=draw.createGroup(),e=draw.createGroup(),f=new RandomPicker,g=new TipControl(this.htmlContainer,7,!1);g.createTip();(new SingleTimeSeriesViewer(this.htmlContainer,c,e,b,f.pickNodeShape(),f.pickSeriesColor(),this.isContinual,this.input.interval,a,g,this.xDrawInfo,this.yDrawInfo,1,!0)).draw();this.svg.appendChild(c);this.svgTrigger.appendChild(e)};
BasicSingleTimeData.prototype.analyzeSingleSeriesData=function(a){for(var b=[],c=this.input.interval,e=this.input.startTime,f=function(a){switch(a){case "s":return null;case "m":return function(a){a=new Date(e+c*a*6E4);return"("+a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+(a.getHours()+1)+":"+(a.getMinutes()+1)+")"};case "h":return null}}(this.input.unit),g=0;g<a.length;g++){var h=this.yDrawInfo.startPoint-(a[g]-this.yDrawInfo.min)*this.yDrawInfo.pixelPerData;b.push(this.xDrawInfo.startPoint+
g*c*this.xDrawInfo.pixelPerData);b.push(h);b.push(f(g));b.push(a[g])}return b};function BasicLineRegularDataViewer(a,b,c,e,f,g,h){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.input=e;this.xDrawInfo=f;this.yDrawInfo=g;this.isContinual=h}
BasicLineRegularDataViewer.prototype.draw=function(){var a=draw.createGroup(),b=draw.createGroup(),c=new RandomPicker,e=new TipControl(this.htmlContainer,7,!1);e.createTip();for(var f=0;f<this.input.series.length;f++){var g=this.input.series[f][0],h=this.analyzeSingleSeriesData(this.input.series[f][1]);(new SingleLineSeriesViewer(this.htmlContainer,a,b,h,c.pickNodeShape(),c.pickSeriesColor(),this.isContinual,this.input.interval,g,e,this.xDrawInfo,this.yDrawInfo)).draw()}this.svg.appendChild(a);this.svgTrigger.appendChild(b)};
BasicLineRegularDataViewer.prototype.analyzeSingleSeriesData=function(a){for(var b=[],c=this.input.interval,e=this.input.start,f=0;f<a.length;f++){var g=this.yDrawInfo.startPoint-(a[f]-this.yDrawInfo.min)*this.yDrawInfo.pixelPerData;b.push(this.xDrawInfo.startPoint+f*c*this.xDrawInfo.pixelPerData);b.push(g);b.push(e+c*f);b.push(a[f])}return b};function BasicPieDataViewer(a,b,c,e,f,g,h,p,l,m,q){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.input=e;this.center=f;this.dataDrawAreaX=g;this.dataDrawAreaY=h;this.radiusForLabel=p;this.radiusForPie=l;this.radiusForConnectionLineTurn=m;this.total=q}
BasicPieDataViewer.prototype.draw=function(){var a=this.analyze(),b=new RandomPicker,c=draw.createGroup(),e=draw.createGroup(),f=new TipControl(this.htmlContainer,0,!0);f.createTip();var g=new PieDataLabelSlotsController;g.generateEmptySlots(19,this.center,this.radiusForLabel,this.svg);for(var h=[],p=[],l=0;l<a.length;l+=4){var m=a[l+3],m=new SinglePieSeriesViewer(c,this.htmlContainer,f,e,a[l],a[l+1],this.radiusForLabel,this.radiusForPie,this.radiusForConnectionLineTurn,this.center,a[l+2],b.pickSeriesColor(),
m,g),q=m.getConnectorInfo();q.isLeft?h.push(q):p.push(q);m.draw()}if(!this.input.noDataLabel){h=g.processConnectorInfo(h,!0);p=g.processConnectorInfo(p,!1);for(l=0;l<h.length;l++)c.appendChild(g.createConnectionLine(h[l])),c.appendChild(g.createTextInSlot(h[l].text,h[l].slotIdx,!0));for(l=0;l<p.length;l++)c.appendChild(g.createConnectionLine(p[l])),c.appendChild(g.createTextInSlot(p[l].text,p[l].slotIdx,!1))}this.svg.appendChild(c);this.svgTrigger.appendChild(e)};
BasicPieDataViewer.prototype.analyze=function(){for(var a=[],b=0,c=0;c<this.input.series.length;c++){var e=this.input.series[c][1],f=e/this.total*360;a.push(b);a.push(b+f);a.push(this.input.series[c][0]);a.push(e);b+=f}return a};function BasicStackRegularDataViewer(a,b,c,e,f,g,h){this.htmlContainer=a;this.svg=b;this.svgTrigger=c;this.input=e;this.xDrawInfo=f;this.yDrawInfo=g;this.topTip=null;this.isContinual=h}
BasicStackRegularDataViewer.prototype.draw=function(){for(var a=draw.createGroup(),b=draw.createGroup(),c=new RandomPicker,e=new SharedTipControl(this.htmlContainer,7),f=[],g=0;g<this.input.series.length;g++)f.push(this.input.series[g][0]);e.createTip(f);f=Array(this.input.series[0][1].length);for(g=0;g<f.length;g++)f[g]=0;for(var h=[],g=0;g<this.input.series.length;g++){var p=this.input.series[g][0],l=this.analyzeSingleSeriesData(this.input.series[g][1],f);h.push([p,l])}h.reverse();for(g=0;g<h.length;g++)p=
h[g][0],l=h[g][1],(new SingleStackSeriesViewer(this.htmlContainer,a,b,l,c.pickNodeShape(),c.pickSeriesColor(),this.isContinual,this.input.interval,p,e,this.xDrawInfo,this.yDrawInfo,3,!1)).draw();this.svg.appendChild(a);this.svgTrigger.appendChild(b)};
BasicStackRegularDataViewer.prototype.analyzeSingleSeriesData=function(a,b){for(var c=[],e=this.input.interval,f=0;f<a.length;f++){var g=this.xDrawInfo.startPoint+f*e*this.xDrawInfo.pixelPerData;b[f]=a[f]+b[f];var h=this.yDrawInfo.startPoint-(b[f]-this.yDrawInfo.min)*this.yDrawInfo.pixelPerData;c.push(g);c.push(h);c.push(this.input.start+this.input.interval*f);c.push(a[f])}return c};(function(a){var b;"undefined"===typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(b={},define(function(){return b})):b="undefined"!==typeof window?window:a:b=exports;(function(a){if(!b)var b=1E-6;if(!f)var f="undefined"!==typeof Float32Array?Float32Array:Array;if(!g)var g=Math.random;var h={setMatrixArrayType:function(d){f=d}};"undefined"!==typeof a&&(a.glMatrix=h);var p=Math.PI/180;h.toRadian=function(d){return d*p};var l={create:function(){var d=new f(2);d[0]=0;
d[1]=0;return d},clone:function(d){var n=new f(2);n[0]=d[0];n[1]=d[1];return n},fromValues:function(d,n){var a=new f(2);a[0]=d;a[1]=n;return a},copy:function(d,n){d[0]=n[0];d[1]=n[1];return d},set:function(d,n,a){d[0]=n;d[1]=a;return d},add:function(d,n,a){d[0]=n[0]+a[0];d[1]=n[1]+a[1];return d},subtract:function(d,n,a){d[0]=n[0]-a[0];d[1]=n[1]-a[1];return d}};l.sub=l.subtract;l.multiply=function(d,n,a){d[0]=n[0]*a[0];d[1]=n[1]*a[1];return d};l.mul=l.multiply;l.divide=function(d,n,a){d[0]=n[0]/a[0];
d[1]=n[1]/a[1];return d};l.div=l.divide;l.min=function(d,n,a){d[0]=Math.min(n[0],a[0]);d[1]=Math.min(n[1],a[1]);return d};l.max=function(d,n,a){d[0]=Math.max(n[0],a[0]);d[1]=Math.max(n[1],a[1]);return d};l.scale=function(d,n,a){d[0]=n[0]*a;d[1]=n[1]*a;return d};l.scaleAndAdd=function(d,n,a,b){d[0]=n[0]+a[0]*b;d[1]=n[1]+a[1]*b;return d};l.distance=function(d,n){var a=n[0]-d[0],b=n[1]-d[1];return Math.sqrt(a*a+b*b)};l.dist=l.distance;l.squaredDistance=function(d,n){var a=n[0]-d[0],b=n[1]-d[1];return a*
a+b*b};l.sqrDist=l.squaredDistance;l.length=function(d){var n=d[0];d=d[1];return Math.sqrt(n*n+d*d)};l.len=l.length;l.squaredLength=function(d){var n=d[0];d=d[1];return n*n+d*d};l.sqrLen=l.squaredLength;l.negate=function(d,n){d[0]=-n[0];d[1]=-n[1];return d};l.normalize=function(d,n){var a=n[0],b=n[1],a=a*a+b*b;0<a&&(a=1/Math.sqrt(a),d[0]=n[0]*a,d[1]=n[1]*a);return d};l.dot=function(d,n){return d[0]*n[0]+d[1]*n[1]};l.cross=function(d,n,a){n=n[0]*a[1]-n[1]*a[0];d[0]=d[1]=0;d[2]=n;return d};l.lerp=function(d,
n,a,b){var c=n[0];n=n[1];d[0]=c+b*(a[0]-c);d[1]=n+b*(a[1]-n);return d};l.random=function(d,n){n=n||1;var a=2*g()*Math.PI;d[0]=Math.cos(a)*n;d[1]=Math.sin(a)*n;return d};l.transformMat2=function(d,n,a){var b=n[0];n=n[1];d[0]=a[0]*b+a[2]*n;d[1]=a[1]*b+a[3]*n;return d};l.transformMat2d=function(d,n,a){var b=n[0];n=n[1];d[0]=a[0]*b+a[2]*n+a[4];d[1]=a[1]*b+a[3]*n+a[5];return d};l.transformMat3=function(d,n,a){var b=n[0];n=n[1];d[0]=a[0]*b+a[3]*n+a[6];d[1]=a[1]*b+a[4]*n+a[7];return d};l.transformMat4=function(d,
n,a){var b=n[0];n=n[1];d[0]=a[0]*b+a[4]*n+a[12];d[1]=a[1]*b+a[5]*n+a[13];return d};l.forEach=function(){var d=l.create();return function(n,a,b,c,e,f){a||(a=2);b||(b=0);for(c=c?Math.min(c*a+b,n.length):n.length;b<c;b+=a)d[0]=n[b],d[1]=n[b+1],e(d,d,f),n[b]=d[0],n[b+1]=d[1];return n}}();l.str=function(d){return"vec2("+d[0]+", "+d[1]+")"};"undefined"!==typeof a&&(a.vec2=l);var m={create:function(){var d=new f(3);d[0]=0;d[1]=0;d[2]=0;return d},clone:function(d){var n=new f(3);n[0]=d[0];n[1]=d[1];n[2]=
d[2];return n},fromValues:function(d,n,a){var b=new f(3);b[0]=d;b[1]=n;b[2]=a;return b},copy:function(d,n){d[0]=n[0];d[1]=n[1];d[2]=n[2];return d},set:function(d,n,a,b){d[0]=n;d[1]=a;d[2]=b;return d},add:function(d,n,a){d[0]=n[0]+a[0];d[1]=n[1]+a[1];d[2]=n[2]+a[2];return d},subtract:function(d,n,a){d[0]=n[0]-a[0];d[1]=n[1]-a[1];d[2]=n[2]-a[2];return d}};m.sub=m.subtract;m.multiply=function(d,n,a){d[0]=n[0]*a[0];d[1]=n[1]*a[1];d[2]=n[2]*a[2];return d};m.mul=m.multiply;m.divide=function(d,n,a){d[0]=
n[0]/a[0];d[1]=n[1]/a[1];d[2]=n[2]/a[2];return d};m.div=m.divide;m.min=function(d,n,a){d[0]=Math.min(n[0],a[0]);d[1]=Math.min(n[1],a[1]);d[2]=Math.min(n[2],a[2]);return d};m.max=function(d,n,a){d[0]=Math.max(n[0],a[0]);d[1]=Math.max(n[1],a[1]);d[2]=Math.max(n[2],a[2]);return d};m.scale=function(d,n,a){d[0]=n[0]*a;d[1]=n[1]*a;d[2]=n[2]*a;return d};m.scaleAndAdd=function(d,n,a,b){d[0]=n[0]+a[0]*b;d[1]=n[1]+a[1]*b;d[2]=n[2]+a[2]*b;return d};m.distance=function(d,n){var a=n[0]-d[0],b=n[1]-d[1],c=n[2]-
d[2];return Math.sqrt(a*a+b*b+c*c)};m.dist=m.distance;m.squaredDistance=function(d,n){var a=n[0]-d[0],b=n[1]-d[1],c=n[2]-d[2];return a*a+b*b+c*c};m.sqrDist=m.squaredDistance;m.length=function(d){var n=d[0],a=d[1];d=d[2];return Math.sqrt(n*n+a*a+d*d)};m.len=m.length;m.squaredLength=function(d){var n=d[0],a=d[1];d=d[2];return n*n+a*a+d*d};m.sqrLen=m.squaredLength;m.negate=function(d,n){d[0]=-n[0];d[1]=-n[1];d[2]=-n[2];return d};m.normalize=function(d,n){var a=n[0],b=n[1],c=n[2],a=a*a+b*b+c*c;0<a&&(a=
1/Math.sqrt(a),d[0]=n[0]*a,d[1]=n[1]*a,d[2]=n[2]*a);return d};m.dot=function(d,n){return d[0]*n[0]+d[1]*n[1]+d[2]*n[2]};m.cross=function(d,n,a){var b=n[0],c=n[1];n=n[2];var e=a[0],f=a[1];a=a[2];d[0]=c*a-n*f;d[1]=n*e-b*a;d[2]=b*f-c*e;return d};m.lerp=function(d,n,a,b){var c=n[0],e=n[1];n=n[2];d[0]=c+b*(a[0]-c);d[1]=e+b*(a[1]-e);d[2]=n+b*(a[2]-n);return d};m.random=function(d,n){n=n||1;var a=2*g()*Math.PI,b=2*g()-1,c=Math.sqrt(1-b*b)*n;d[0]=Math.cos(a)*c;d[1]=Math.sin(a)*c;d[2]=b*n;return d};m.transformMat4=
function(d,n,a){var b=n[0],c=n[1];n=n[2];d[0]=a[0]*b+a[4]*c+a[8]*n+a[12];d[1]=a[1]*b+a[5]*c+a[9]*n+a[13];d[2]=a[2]*b+a[6]*c+a[10]*n+a[14];return d};m.transformMat3=function(d,a,b){var c=a[0],e=a[1];a=a[2];d[0]=c*b[0]+e*b[3]+a*b[6];d[1]=c*b[1]+e*b[4]+a*b[7];d[2]=c*b[2]+e*b[5]+a*b[8];return d};m.transformQuat=function(d,a,b){var c=a[0],e=a[1],f=a[2];a=b[0];var g=b[1],h=b[2];b=b[3];var k=b*c+g*f-h*e,l=b*e+h*c-a*f,m=b*f+a*e-g*c,c=-a*c-g*e-h*f;d[0]=k*b+c*-a+l*-h-m*-g;d[1]=l*b+c*-g+m*-a-k*-h;d[2]=m*b+c*
-h+k*-g-l*-a;return d};m.rotateX=function(d,a,b,c){var e=[],f=[];e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];f[0]=e[0];f[1]=e[1]*Math.cos(c)-e[2]*Math.sin(c);f[2]=e[1]*Math.sin(c)+e[2]*Math.cos(c);d[0]=f[0]+b[0];d[1]=f[1]+b[1];d[2]=f[2]+b[2];return d};m.rotateY=function(d,a,b,c){var e=[],f=[];e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];f[0]=e[2]*Math.sin(c)+e[0]*Math.cos(c);f[1]=e[1];f[2]=e[2]*Math.cos(c)-e[0]*Math.sin(c);d[0]=f[0]+b[0];d[1]=f[1]+b[1];d[2]=f[2]+b[2];return d};m.rotateZ=function(d,
a,b,c){var e=[],f=[];e[0]=a[0]-b[0];e[1]=a[1]-b[1];e[2]=a[2]-b[2];f[0]=e[0]*Math.cos(c)-e[1]*Math.sin(c);f[1]=e[0]*Math.sin(c)+e[1]*Math.cos(c);f[2]=e[2];d[0]=f[0]+b[0];d[1]=f[1]+b[1];d[2]=f[2]+b[2];return d};m.forEach=function(){var d=m.create();return function(a,b,c,e,f,g){b||(b=3);c||(c=0);for(e=e?Math.min(e*b+c,a.length):a.length;c<e;c+=b)d[0]=a[c],d[1]=a[c+1],d[2]=a[c+2],f(d,d,g),a[c]=d[0],a[c+1]=d[1],a[c+2]=d[2];return a}}();m.str=function(d){return"vec3("+d[0]+", "+d[1]+", "+d[2]+")"};"undefined"!==
typeof a&&(a.vec3=m);var q={create:function(){var d=new f(4);d[0]=0;d[1]=0;d[2]=0;d[3]=0;return d},clone:function(d){var a=new f(4);a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];return a},fromValues:function(d,a,b,c){var e=new f(4);e[0]=d;e[1]=a;e[2]=b;e[3]=c;return e},copy:function(d,a){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];return d},set:function(d,a,b,c,e){d[0]=a;d[1]=b;d[2]=c;d[3]=e;return d},add:function(d,a,b){d[0]=a[0]+b[0];d[1]=a[1]+b[1];d[2]=a[2]+b[2];d[3]=a[3]+b[3];return d},subtract:function(d,
a,b){d[0]=a[0]-b[0];d[1]=a[1]-b[1];d[2]=a[2]-b[2];d[3]=a[3]-b[3];return d}};q.sub=q.subtract;q.multiply=function(d,a,b){d[0]=a[0]*b[0];d[1]=a[1]*b[1];d[2]=a[2]*b[2];d[3]=a[3]*b[3];return d};q.mul=q.multiply;q.divide=function(d,a,b){d[0]=a[0]/b[0];d[1]=a[1]/b[1];d[2]=a[2]/b[2];d[3]=a[3]/b[3];return d};q.div=q.divide;q.min=function(d,a,b){d[0]=Math.min(a[0],b[0]);d[1]=Math.min(a[1],b[1]);d[2]=Math.min(a[2],b[2]);d[3]=Math.min(a[3],b[3]);return d};q.max=function(d,a,b){d[0]=Math.max(a[0],b[0]);d[1]=
Math.max(a[1],b[1]);d[2]=Math.max(a[2],b[2]);d[3]=Math.max(a[3],b[3]);return d};q.scale=function(d,a,b){d[0]=a[0]*b;d[1]=a[1]*b;d[2]=a[2]*b;d[3]=a[3]*b;return d};q.scaleAndAdd=function(d,a,b,c){d[0]=a[0]+b[0]*c;d[1]=a[1]+b[1]*c;d[2]=a[2]+b[2]*c;d[3]=a[3]+b[3]*c;return d};q.distance=function(d,a){var b=a[0]-d[0],c=a[1]-d[1],e=a[2]-d[2],f=a[3]-d[3];return Math.sqrt(b*b+c*c+e*e+f*f)};q.dist=q.distance;q.squaredDistance=function(d,a){var b=a[0]-d[0],c=a[1]-d[1],e=a[2]-d[2],f=a[3]-d[3];return b*b+c*c+
e*e+f*f};q.sqrDist=q.squaredDistance;q.length=function(d){var a=d[0],b=d[1],c=d[2];d=d[3];return Math.sqrt(a*a+b*b+c*c+d*d)};q.len=q.length;q.squaredLength=function(d){var a=d[0],b=d[1],c=d[2];d=d[3];return a*a+b*b+c*c+d*d};q.sqrLen=q.squaredLength;q.negate=function(d,a){d[0]=-a[0];d[1]=-a[1];d[2]=-a[2];d[3]=-a[3];return d};q.normalize=function(d,a){var b=a[0],c=a[1],e=a[2],f=a[3],b=b*b+c*c+e*e+f*f;0<b&&(b=1/Math.sqrt(b),d[0]=a[0]*b,d[1]=a[1]*b,d[2]=a[2]*b,d[3]=a[3]*b);return d};q.dot=function(d,
a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3]};q.lerp=function(d,a,b,c){var e=a[0],f=a[1],g=a[2];a=a[3];d[0]=e+c*(b[0]-e);d[1]=f+c*(b[1]-f);d[2]=g+c*(b[2]-g);d[3]=a+c*(b[3]-a);return d};q.random=function(d,a){a=a||1;d[0]=g();d[1]=g();d[2]=g();d[3]=g();q.normalize(d,d);q.scale(d,d,a);return d};q.transformMat4=function(d,a,b){var c=a[0],e=a[1],f=a[2];a=a[3];d[0]=b[0]*c+b[4]*e+b[8]*f+b[12]*a;d[1]=b[1]*c+b[5]*e+b[9]*f+b[13]*a;d[2]=b[2]*c+b[6]*e+b[10]*f+b[14]*a;d[3]=b[3]*c+b[7]*e+b[11]*f+b[15]*a;return d};
q.transformQuat=function(d,a,b){var c=a[0],e=a[1],f=a[2];a=b[0];var g=b[1],h=b[2];b=b[3];var k=b*c+g*f-h*e,l=b*e+h*c-a*f,m=b*f+a*e-g*c,c=-a*c-g*e-h*f;d[0]=k*b+c*-a+l*-h-m*-g;d[1]=l*b+c*-g+m*-a-k*-h;d[2]=m*b+c*-h+k*-g-l*-a;return d};q.forEach=function(){var d=q.create();return function(a,b,c,e,f,g){b||(b=4);c||(c=0);for(e=e?Math.min(e*b+c,a.length):a.length;c<e;c+=b)d[0]=a[c],d[1]=a[c+1],d[2]=a[c+2],d[3]=a[c+3],f(d,d,g),a[c]=d[0],a[c+1]=d[1],a[c+2]=d[2],a[c+3]=d[3];return a}}();q.str=function(d){return"vec4("+
d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"};"undefined"!==typeof a&&(a.vec4=q);h={create:function(){var d=new f(4);d[0]=1;d[1]=0;d[2]=0;d[3]=1;return d},clone:function(d){var a=new f(4);a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];return a},copy:function(d,a){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];return d},identity:function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=1;return d},transpose:function(d,a){if(d===a){var b=a[1];d[1]=a[2];d[2]=b}else d[0]=a[0],d[1]=a[2],d[2]=a[1],d[3]=a[3];return d},invert:function(d,a){var b=
a[0],c=a[1],e=a[2],f=a[3],g=b*f-e*c;if(!g)return null;g=1/g;d[0]=f*g;d[1]=-c*g;d[2]=-e*g;d[3]=b*g;return d},adjoint:function(d,a){var b=a[0];d[0]=a[3];d[1]=-a[1];d[2]=-a[2];d[3]=b;return d},determinant:function(d){return d[0]*d[3]-d[2]*d[1]},multiply:function(d,a,b){var c=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],k=b[2];b=b[3];d[0]=c*g+f*h;d[1]=e*g+a*h;d[2]=c*k+f*b;d[3]=e*k+a*b;return d}};h.mul=h.multiply;h.rotate=function(d,a,b){var c=a[0],e=a[1],f=a[2];a=a[3];var g=Math.sin(b);b=Math.cos(b);d[0]=
c*b+f*g;d[1]=e*b+a*g;d[2]=c*-g+f*b;d[3]=e*-g+a*b;return d};h.scale=function(d,a,b){var c=a[1],e=a[2],f=a[3],g=b[0];b=b[1];d[0]=a[0]*g;d[1]=c*g;d[2]=e*b;d[3]=f*b;return d};h.str=function(d){return"mat2("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"};h.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2))};h.LDU=function(d,a,b,c){d[2]=c[2]/c[0];b[0]=c[0];b[1]=c[1];b[3]=c[3]-d[2]*b[1];return[d,a,b]};"undefined"!==typeof a&&(a.mat2=h);h={create:function(){var d=
new f(6);d[0]=1;d[1]=0;d[2]=0;d[3]=1;d[4]=0;d[5]=0;return d},clone:function(d){var a=new f(6);a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];return a},copy:function(d,a){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];return d},identity:function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=1;d[4]=0;d[5]=0;return d},invert:function(d,a){var b=a[0],c=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=b*f-c*e;if(!k)return null;k=1/k;d[0]=f*k;d[1]=-c*k;d[2]=-e*k;d[3]=b*k;d[4]=(e*h-f*g)*k;d[5]=(c*g-b*h)*k;return d},
determinant:function(d){return d[0]*d[3]-d[1]*d[2]},multiply:function(d,a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4];a=a[5];var k=b[0],l=b[1],m=b[2],u=b[3],p=b[4];b=b[5];d[0]=c*k+f*l;d[1]=e*k+g*l;d[2]=c*m+f*u;d[3]=e*m+g*u;d[4]=c*p+f*b+h;d[5]=e*p+g*b+a;return d}};h.mul=h.multiply;h.rotate=function(d,a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4];a=a[5];var k=Math.sin(b);b=Math.cos(b);d[0]=c*b+f*k;d[1]=e*b+g*k;d[2]=c*-k+f*b;d[3]=e*-k+g*b;d[4]=h;d[5]=a;return d};h.scale=function(d,a,b){var c=a[1],e=a[2],
f=a[3],g=a[4],h=a[5],k=b[0];b=b[1];d[0]=a[0]*k;d[1]=c*k;d[2]=e*b;d[3]=f*b;d[4]=g;d[5]=h;return d};h.translate=function(d,a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4];a=a[5];var k=b[0];b=b[1];d[0]=c;d[1]=e;d[2]=f;d[3]=g;d[4]=c*k+f*b+h;d[5]=e*k+g*b+a;return d};h.str=function(d){return"mat2d("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")"};h.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+1)};"undefined"!==
typeof a&&(a.mat2d=h);var k={create:function(){var d=new f(9);d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d},fromMat4:function(d,a){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[4];d[4]=a[5];d[5]=a[6];d[6]=a[8];d[7]=a[9];d[8]=a[10];return d},clone:function(d){var a=new f(9);a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];return a},copy:function(d,a){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[8]=a[8];
return d},identity:function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d},transpose:function(d,a){if(d===a){var b=a[1],c=a[2],e=a[5];d[1]=a[3];d[2]=a[6];d[3]=b;d[5]=a[7];d[6]=c;d[7]=e}else d[0]=a[0],d[1]=a[3],d[2]=a[6],d[3]=a[1],d[4]=a[4],d[5]=a[7],d[6]=a[2],d[7]=a[5],d[8]=a[8];return d},invert:function(d,a){var b=a[0],c=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=a[8],u=m*g-h*l,p=-m*f+h*k,q=l*f-g*k,r=b*u+c*p+e*q;if(!r)return null;r=1/r;d[0]=u*r;d[1]=(-m*c+e*l)*
r;d[2]=(h*c-e*g)*r;d[3]=p*r;d[4]=(m*b-e*k)*r;d[5]=(-h*b+e*f)*r;d[6]=q*r;d[7]=(-l*b+c*k)*r;d[8]=(g*b-c*f)*r;return d},adjoint:function(d,a){var b=a[0],c=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=a[8];d[0]=g*m-h*l;d[1]=e*l-c*m;d[2]=c*h-e*g;d[3]=h*k-f*m;d[4]=b*m-e*k;d[5]=e*f-b*h;d[6]=f*l-g*k;d[7]=c*k-b*l;d[8]=b*g-c*f;return d},determinant:function(d){var a=d[3],b=d[4],c=d[5],e=d[6],f=d[7],g=d[8];return d[0]*(g*b-c*f)+d[1]*(-g*a+c*e)+d[2]*(f*a-b*e)},multiply:function(d,a,b){var c=a[0],e=a[1],f=
a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7];a=a[8];var u=b[0],p=b[1],q=b[2],r=b[3],t=b[4],v=b[5],x=b[6],y=b[7];b=b[8];d[0]=u*c+p*g+q*l;d[1]=u*e+p*h+q*m;d[2]=u*f+p*k+q*a;d[3]=r*c+t*g+v*l;d[4]=r*e+t*h+v*m;d[5]=r*f+t*k+v*a;d[6]=x*c+y*g+b*l;d[7]=x*e+y*h+b*m;d[8]=x*f+y*k+b*a;return d}};k.mul=k.multiply;k.translate=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=b[3],k=b[4],l=b[5],m=b[6],p=b[7];b=b[8];var u=c[0];c=c[1];a[0]=e;a[1]=f;a[2]=g;a[3]=h;a[4]=k;a[5]=l;a[6]=u*e+c*h+m;a[7]=u*f+c*k+p;a[8]=u*g+c*l+b;return a};
k.rotate=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=b[3],k=b[4],l=b[5],m=b[6],p=b[7];b=b[8];var u=Math.sin(c);c=Math.cos(c);a[0]=c*e+u*h;a[1]=c*f+u*k;a[2]=c*g+u*l;a[3]=c*h-u*e;a[4]=c*k-u*f;a[5]=c*l-u*g;a[6]=m;a[7]=p;a[8]=b;return a};k.scale=function(a,b,c){var e=c[0];c=c[1];a[0]=e*b[0];a[1]=e*b[1];a[2]=e*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};k.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};
k.fromQuat=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=c+c,k=e+e,l=f+f,c=c*h,m=e*h,e=e*k,p=f*h,u=f*k,f=f*l,h=g*h,k=g*k,g=g*l;a[0]=1-e-f;a[3]=m-g;a[6]=p+k;a[1]=m+g;a[4]=1-c-f;a[7]=u-h;a[2]=p-k;a[5]=u+h;a[8]=1-c-e;return a};k.normalFromMat4=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],p=b[8],u=b[9],q=b[10],r=b[11],t=b[12],w=b[13],v=b[14],x=b[15],y=c*k-e*h,B=c*l-f*h,z=c*m-g*h,A=e*l-f*k,H=e*m-g*k,I=f*m-g*l,J=p*w-u*t,K=p*v-q*t,p=p*x-r*t,L=u*v-q*w,u=u*x-r*w,q=q*x-r*v,r=
y*q-B*u+z*L+A*p-H*K+I*J;if(!r)return null;r=1/r;a[0]=(k*q-l*u+m*L)*r;a[1]=(l*p-h*q-m*K)*r;a[2]=(h*u-k*p+m*J)*r;a[3]=(f*u-e*q-g*L)*r;a[4]=(c*q-f*p+g*K)*r;a[5]=(e*p-c*u-g*J)*r;a[6]=(w*I-v*H+x*A)*r;a[7]=(v*z-t*I-x*B)*r;a[8]=(t*H-w*z+x*y)*r;return a};k.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};k.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],
2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!==typeof a&&(a.mat3=k);var t={create:function(){var a=new f(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new f(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];
a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],e=b[2],f=b[3],g=b[6],h=b[7],k=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=e;a[9]=g;a[11]=b[14];a[12]=f;a[13]=
h;a[14]=k}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],p=b[8],u=b[9],q=b[10],r=b[11],t=b[12],w=b[13],v=b[14],x=b[15],y=c*k-e*h,B=c*l-f*h,z=c*m-g*h,A=e*l-f*k,H=e*m-g*k,I=f*m-g*l,J=p*w-u*t,K=p*v-q*t,L=p*x-r*t,R=u*v-q*w,S=u*x-r*w,T=q*x-r*v,D=y*T-B*S+z*R+A*L-H*K+I*J;if(!D)return null;
D=1/D;a[0]=(k*T-l*S+m*R)*D;a[1]=(f*S-e*T-g*R)*D;a[2]=(w*I-v*H+x*A)*D;a[3]=(q*H-u*I-r*A)*D;a[4]=(l*L-h*T-m*K)*D;a[5]=(c*T-f*L+g*K)*D;a[6]=(v*z-t*I-x*B)*D;a[7]=(p*I-q*z+r*B)*D;a[8]=(h*S-k*L+m*J)*D;a[9]=(e*L-c*S-g*J)*D;a[10]=(t*H-w*z+x*y)*D;a[11]=(u*z-p*H-r*y)*D;a[12]=(k*K-h*R-l*J)*D;a[13]=(c*R-e*K+f*J)*D;a[14]=(w*B-t*A-v*y)*D;a[15]=(p*A-u*B+q*y)*D;return a},adjoint:function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],p=b[8],q=b[9],r=b[10],t=b[11],C=b[12],w=b[13],v=b[14],x=b[15];
a[0]=k*(r*x-t*v)-q*(l*x-m*v)+w*(l*t-m*r);a[1]=-(e*(r*x-t*v)-q*(f*x-g*v)+w*(f*t-g*r));a[2]=e*(l*x-m*v)-k*(f*x-g*v)+w*(f*m-g*l);a[3]=-(e*(l*t-m*r)-k*(f*t-g*r)+q*(f*m-g*l));a[4]=-(h*(r*x-t*v)-p*(l*x-m*v)+C*(l*t-m*r));a[5]=c*(r*x-t*v)-p*(f*x-g*v)+C*(f*t-g*r);a[6]=-(c*(l*x-m*v)-h*(f*x-g*v)+C*(f*m-g*l));a[7]=c*(l*t-m*r)-h*(f*t-g*r)+p*(f*m-g*l);a[8]=h*(q*x-t*w)-p*(k*x-m*w)+C*(k*t-m*q);a[9]=-(c*(q*x-t*w)-p*(e*x-g*w)+C*(e*t-g*q));a[10]=c*(k*x-m*w)-h*(e*x-g*w)+C*(e*m-g*k);a[11]=-(c*(k*t-m*q)-h*(e*t-g*q)+p*
(e*m-g*k));a[12]=-(h*(q*v-r*w)-p*(k*v-l*w)+C*(k*r-l*q));a[13]=c*(q*v-r*w)-p*(e*v-f*w)+C*(e*r-f*q);a[14]=-(c*(k*v-l*w)-h*(e*v-f*w)+C*(e*l-f*k));a[15]=c*(k*r-l*q)-h*(e*r-f*q)+p*(e*l-f*k);return a},determinant:function(a){var b=a[0],c=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=a[8],p=a[9],q=a[10],r=a[11],t=a[12],C=a[13],w=a[14];a=a[15];return(b*h-c*g)*(q*a-r*w)-(b*k-e*g)*(p*a-r*C)+(b*l-f*g)*(p*w-q*C)+(c*k-e*h)*(m*a-r*t)-(c*l-f*h)*(m*w-q*t)+(e*l-f*k)*(m*C-p*t)},multiply:function(a,b,c){var e=b[0],
f=b[1],g=b[2],h=b[3],k=b[4],l=b[5],m=b[6],p=b[7],q=b[8],r=b[9],t=b[10],C=b[11],w=b[12],v=b[13],x=b[14];b=b[15];var y=c[0],B=c[1],z=c[2],A=c[3];a[0]=y*e+B*k+z*q+A*w;a[1]=y*f+B*l+z*r+A*v;a[2]=y*g+B*m+z*t+A*x;a[3]=y*h+B*p+z*C+A*b;y=c[4];B=c[5];z=c[6];A=c[7];a[4]=y*e+B*k+z*q+A*w;a[5]=y*f+B*l+z*r+A*v;a[6]=y*g+B*m+z*t+A*x;a[7]=y*h+B*p+z*C+A*b;y=c[8];B=c[9];z=c[10];A=c[11];a[8]=y*e+B*k+z*q+A*w;a[9]=y*f+B*l+z*r+A*v;a[10]=y*g+B*m+z*t+A*x;a[11]=y*h+B*p+z*C+A*b;y=c[12];B=c[13];z=c[14];A=c[15];a[12]=y*e+B*k+
z*q+A*w;a[13]=y*f+B*l+z*r+A*v;a[14]=y*g+B*m+z*t+A*x;a[15]=y*h+B*p+z*C+A*b;return a}};t.mul=t.multiply;t.translate=function(a,b,c){var e=c[0],f=c[1];c=c[2];var g,h,k,l,m,p,q,r,t,C,w,v;b===a?(a[12]=b[0]*e+b[4]*f+b[8]*c+b[12],a[13]=b[1]*e+b[5]*f+b[9]*c+b[13],a[14]=b[2]*e+b[6]*f+b[10]*c+b[14],a[15]=b[3]*e+b[7]*f+b[11]*c+b[15]):(g=b[0],h=b[1],k=b[2],l=b[3],m=b[4],p=b[5],q=b[6],r=b[7],t=b[8],C=b[9],w=b[10],v=b[11],a[0]=g,a[1]=h,a[2]=k,a[3]=l,a[4]=m,a[5]=p,a[6]=q,a[7]=r,a[8]=t,a[9]=C,a[10]=w,a[11]=v,a[12]=
g*e+m*f+t*c+b[12],a[13]=h*e+p*f+C*c+b[13],a[14]=k*e+q*f+w*c+b[14],a[15]=l*e+r*f+v*c+b[15]);return a};t.scale=function(a,b,c){var e=c[0],f=c[1];c=c[2];a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*f;a[5]=b[5]*f;a[6]=b[6]*f;a[7]=b[7]*f;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};t.rotate=function(a,c,f,g){var h=g[0],k=g[1];g=g[2];var l=Math.sqrt(h*h+k*k+g*g),m,p,q,r,t,M,G,C,w,v,x,y,B,z,A,H,I,J,K,L;if(Math.abs(l)<b)return null;
l=1/l;h*=l;k*=l;g*=l;m=Math.sin(f);p=Math.cos(f);q=1-p;f=c[0];l=c[1];r=c[2];t=c[3];M=c[4];G=c[5];C=c[6];w=c[7];v=c[8];x=c[9];y=c[10];B=c[11];z=h*h*q+p;A=k*h*q+g*m;H=g*h*q-k*m;I=h*k*q-g*m;J=k*k*q+p;K=g*k*q+h*m;L=h*g*q+k*m;h=k*g*q-h*m;k=g*g*q+p;a[0]=f*z+M*A+v*H;a[1]=l*z+G*A+x*H;a[2]=r*z+C*A+y*H;a[3]=t*z+w*A+B*H;a[4]=f*I+M*J+v*K;a[5]=l*I+G*J+x*K;a[6]=r*I+C*J+y*K;a[7]=t*I+w*J+B*K;a[8]=f*L+M*h+v*k;a[9]=l*L+G*h+x*k;a[10]=r*L+C*h+y*k;a[11]=t*L+w*h+B*k;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);
return a};t.rotateX=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var f=b[4],g=b[5],h=b[6],k=b[7],l=b[8],m=b[9],p=b[10],q=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=f*c+l*e;a[5]=g*c+m*e;a[6]=h*c+p*e;a[7]=k*c+q*e;a[8]=l*c-f*e;a[9]=m*c-g*e;a[10]=p*c-h*e;a[11]=q*c-k*e;return a};t.rotateY=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var f=b[0],g=b[1],h=b[2],k=b[3],l=b[8],m=b[9],p=b[10],q=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],
a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*c-l*e;a[1]=g*c-m*e;a[2]=h*c-p*e;a[3]=k*c-q*e;a[8]=f*e+l*c;a[9]=g*e+m*c;a[10]=h*e+p*c;a[11]=k*e+q*c;return a};t.rotateZ=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var f=b[0],g=b[1],h=b[2],k=b[3],l=b[4],m=b[5],p=b[6],q=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*c+l*e;a[1]=g*c+m*e;a[2]=h*c+p*e;a[3]=k*c+q*e;a[4]=l*c-f*e;a[5]=m*c-g*e;a[6]=p*c-h*e;a[7]=q*c-k*e;return a};
t.fromRotationTranslation=function(a,b,c){var e=b[0],f=b[1],g=b[2],h=b[3],k=e+e,l=f+f,m=g+g;b=e*k;var p=e*l,e=e*m,q=f*l,f=f*m,g=g*m,k=h*k,l=h*l,h=h*m;a[0]=1-(q+g);a[1]=p+h;a[2]=e-l;a[3]=0;a[4]=p-h;a[5]=1-(b+g);a[6]=f+k;a[7]=0;a[8]=e+l;a[9]=f-k;a[10]=1-(b+q);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};t.fromQuat=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=c+c,k=e+e,l=f+f,c=c*h,m=e*h,e=e*k,p=f*h,q=f*k,f=f*l,h=g*h,k=g*k,g=g*l;a[0]=1-e-f;a[1]=m+g;a[2]=p-k;a[3]=0;a[4]=m-g;a[5]=1-c-f;
a[6]=q+h;a[7]=0;a[8]=p+k;a[9]=q-h;a[10]=1-c-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};t.frustum=function(a,b,c,e,f,g,h){var k=1/(c-b),l=1/(f-e),m=1/(g-h);a[0]=2*g*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*l;a[6]=0;a[7]=0;a[8]=(c+b)*k;a[9]=(f+e)*l;a[10]=(h+g)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*g*2*m;a[15]=0;return a};t.perspective=function(a,b,c,e,f){b=1/Math.tan(b/2);var g=1/(e-f);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+e)*g;a[11]=-1;a[12]=0;a[13]=0;
a[14]=2*f*e*g;a[15]=0;return a};t.ortho=function(a,b,c,e,f,g,h){var k=1/(b-c),l=1/(e-f),m=1/(g-h);a[0]=-2*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*m;a[11]=0;a[12]=(b+c)*k;a[13]=(f+e)*l;a[14]=(h+g)*m;a[15]=1;return a};t.lookAt=function(a,c,f,g){var h,k,l,m,p,q,r,u,M=c[0],G=c[1];c=c[2];l=g[0];m=g[1];k=g[2];r=f[0];g=f[1];h=f[2];if(Math.abs(M-r)<b&&Math.abs(G-g)<b&&Math.abs(c-h)<b)return t.identity(a);f=M-r;g=G-g;r=c-h;u=1/Math.sqrt(f*f+g*g+r*r);f*=u;g*=u;r*=u;h=m*r-
k*g;k=k*f-l*r;l=l*g-m*f;(u=Math.sqrt(h*h+k*k+l*l))?(u=1/u,h*=u,k*=u,l*=u):l=k=h=0;m=g*l-r*k;p=r*h-f*l;q=f*k-g*h;(u=Math.sqrt(m*m+p*p+q*q))?(u=1/u,m*=u,p*=u,q*=u):q=p=m=0;a[0]=h;a[1]=m;a[2]=f;a[3]=0;a[4]=k;a[5]=p;a[6]=g;a[7]=0;a[8]=l;a[9]=q;a[10]=r;a[11]=0;a[12]=-(h*M+k*G+l*c);a[13]=-(m*M+p*G+q*c);a[14]=-(f*M+g*G+r*c);a[15]=1;return a};t.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+
a[13]+", "+a[14]+", "+a[15]+")"};t.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!==typeof a&&(a.mat4=t);var r={create:function(){var a=new f(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};r.rotationTo=function(){var a=
m.create(),b=m.fromValues(1,0,0),c=m.fromValues(0,1,0);return function(e,f,g){var h=m.dot(f,g);if(-.999999>h)return m.cross(a,b,f),1E-6>m.length(a)&&m.cross(a,c,f),m.normalize(a,a),r.setAxisAngle(e,a,Math.PI),e;if(.999999<h)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e;m.cross(a,f,g);e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=1+h;return r.normalize(e,e)}}();r.setAxes=function(){var a=k.create();return function(b,c,e,f){a[0]=e[0];a[3]=e[1];a[6]=e[2];a[1]=f[0];a[4]=f[1];a[7]=f[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return r.normalize(b,
r.fromMat3(b,a))}}();r.clone=q.clone;r.fromValues=q.fromValues;r.copy=q.copy;r.set=q.set;r.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};r.setAxisAngle=function(a,b,c){c*=.5;var e=Math.sin(c);a[0]=e*b[0];a[1]=e*b[1];a[2]=e*b[2];a[3]=Math.cos(c);return a};r.add=q.add;r.multiply=function(a,b,c){var e=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],k=c[1],l=c[2];c=c[3];a[0]=e*c+b*h+f*l-g*k;a[1]=f*c+b*k+g*h-e*l;a[2]=g*c+b*l+e*k-f*h;a[3]=b*c-e*h-f*k-g*l;return a};r.mul=r.multiply;r.scale=q.scale;r.rotateX=
function(a,b,c){c*=.5;var e=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=e*c+b*h;a[1]=f*c+g*h;a[2]=g*c-f*h;a[3]=b*c-e*h;return a};r.rotateY=function(a,b,c){c*=.5;var e=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=e*c-g*h;a[1]=f*c+b*h;a[2]=g*c+e*h;a[3]=b*c-f*h;return a};r.rotateZ=function(a,b,c){c*=.5;var e=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=e*c+f*h;a[1]=f*c-e*h;a[2]=g*c+b*h;a[3]=b*c-g*h;return a};r.calculateW=function(a,b){var c=b[0],
e=b[1],f=b[2];a[0]=c;a[1]=e;a[2]=f;a[3]=-Math.sqrt(Math.abs(1-c*c-e*e-f*f));return a};r.dot=q.dot;r.lerp=q.lerp;r.slerp=function(a,b,c,e){var f=b[0],g=b[1],h=b[2];b=b[3];var k=c[0],l=c[1],m=c[2];c=c[3];var p,q,r;q=f*k+g*l+h*m+b*c;0>q&&(q=-q,k=-k,l=-l,m=-m,c=-c);1E-6<1-q?(p=Math.acos(q),r=Math.sin(p),q=Math.sin((1-e)*p)/r,e=Math.sin(e*p)/r):q=1-e;a[0]=q*f+e*k;a[1]=q*g+e*l;a[2]=q*h+e*m;a[3]=q*b+e*c;return a};r.invert=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=c*c+e*e+f*f+g*g,h=h?1/h:0;a[0]=-c*
h;a[1]=-e*h;a[2]=-f*h;a[3]=g*h;return a};r.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};r.length=q.length;r.len=r.length;r.squaredLength=q.squaredLength;r.sqrLen=r.squaredLength;r.normalize=q.normalize;r.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[7]-b[5])*c,a[1]=(b[2]-b[6])*c,a[2]=(b[3]-b[1])*c;else{var e=0;b[4]>b[0]&&(e=1);b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3,c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1);a[e]=.5*
c;c=.5/c;a[3]=(b[3*g+f]-b[3*f+g])*c;a[f]=(b[3*f+e]+b[3*e+f])*c;a[g]=(b[3*g+e]+b[3*e+g])*c}return a};r.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof a&&(a.quat=r)})(b)})(this);var threeModels=function(){function a(a,b,c,h,p,l,m,q,k){this.translate=a;this.scale=b;this.modelMatrix=mat4.create();this.MVMatrix=mat4.create();this.MVPMatrix=mat4.create();this.normalMatrix=mat3.create();this.isFocus=!1;this.identityMatrix=mat4.create();this.mcColor=c;this.fillColorArray=colors.convertToWebGLcolorArray(c.fillColor);this.strokeColorArray=colors.convertToWebGLcolorArray(c.strokeColor);this.label=p;this.dataY=l+" -- "+h;this.staticTipControl=new StaticTipControl(m,q,k);this.staticTipControl.createTip()}
function b(a,b,c){this.translate=a;this.modelMatrix=mat4.create();this.MVMatrix=mat4.create();this.MVPMatrix=mat4.create();this.identityMatrix=mat4.create();this.scale=b;this.texture=null}a.prototype.calculateModelMatrix=function(a){mat4.rotate(this.modelMatrix,this.identityMatrix,a,[0,1,0]);mat4.translate(this.modelMatrix,this.modelMatrix,this.translate);mat4.scale(this.modelMatrix,this.modelMatrix,this.scale)};var c=0;a.prototype.toggleFocus=function(){this.isFocus?this.cancelFocus():this.setFocus();
return this.isFocus};a.prototype.setFocus=function(){c++;this.isFocus=!0};a.prototype.cancelFocus=function(){c--;this.isFocus=!1};b.prototype.connectWithTexture=function(a,b){this.texture=webglUtil.prepareLabelTexture(a,b)};b.prototype.calculateModelMatrix=function(a){mat4.rotate(this.modelMatrix,this.identityMatrix,a,[0,1,0]);mat4.translate(this.modelMatrix,this.modelMatrix,this.translate);mat4.scale(this.modelMatrix,this.modelMatrix,this.scale)};return{CuboidModel:a,isAnythingFocused:function(){return 0!==
c},PlaneModel:b}}();var webglUtil={createGLContext:function(a){var b=a.getContext("webgl");b.viewportWidth=a.width;b.viewportHeight=a.height;return b},createProgram:function(a,b,c){var e=c.createProgram();a=this.loadShadersFromHTML(a,b,c);c.attachShader(e,a.vertexShader);c.attachShader(e,a.fragmentShader);c.linkProgram(e);return e},loadShadersFromHTML:function(a,b,c){a=document.getElementById(a).innerHTML.trim();var e=document.getElementById(b).innerHTML.trim();b=c.createShader(c.VERTEX_SHADER);c.shaderSource(b,a);c.compileShader(b);
a=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(a,e);c.compileShader(a);(e=c.getShaderParameter(b,c.COMPILE_STATUS))||console.log("Failed to compile vertex shader");(e=c.getShaderParameter(a,c.COMPILE_STATUS))||console.log("Failed to compile fragment shader");return{vertexShader:b,fragmentShader:a}},prepareElementBuffer:function(a,b){var c=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);c.numOfIndices=
a.length;return c},prepareArrayBuffer:function(a,b){var c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);b.bufferData(b.ARRAY_BUFFER,a,b.STATIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,null);return c},prepareLabelTexture:function(a,b){var c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindTexture(b.TEXTURE_2D,null);return c},prepareModelBuffers:function(a){var b=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]),c=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,
0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),e=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),f=new Float32Array([1.001,1.001,1.001,-1.001,1.001,1.001,-1.001,-1.001,1.001,1.001,-1.001,1.001,1.001,-1.001,-1.001,1.001,1.001,-1.001,-1.001,1.001,-1.001,-1.001,-1.001,-1.001]),g=new Uint8Array([0,1,1,6,6,5,5,0,1,2,6,7,5,4,0,3,3,2,2,7,7,4,4,3]),h=new Float32Array([-1,0,1,1,0,1,1,0,-1,-1,0,-1]),p=new Uint8Array([0,
1,2,2,3,0]),l=new Float32Array([0,0,1,.1,1,1,0,1]),b=this.prepareArrayBuffer(b,a),c=this.prepareArrayBuffer(c,a),e=this.prepareElementBuffer(e,a),f=this.prepareArrayBuffer(f,a),g=this.prepareElementBuffer(g,a),h=this.prepareArrayBuffer(h,a),p=this.prepareElementBuffer(p,a);a=this.prepareArrayBuffer(l,a);return{verticesBuffer:b,normalsBuffer:c,indicesBuffer:e,wireFrameVerticesBuffer:f,cubeWireFrameIndicesBuffer:g,planeVerticesBuffer:h,planeIndicesBuffer:p,planeTextureCoordinatesBuffer:a}},createFrameBufferObject:function(a){var b=
a.createFramebuffer(),c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.viewportWidth,a.viewportHeight,0,a.RGBA,a.UNSIGNED_BYTE,null);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);var e=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,e);a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_COMPONENT16,a.viewportWidth,a.viewportHeight);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,c,0);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e);a.bindFramebuffer(a.FRAMEBUFFER,null);a.bindTexture(a.TEXTURE_2D,null);a.bindRenderbuffer(a.RENDERBUFFER,null);return b}};function convertToCuboidModels(a,b,c,e,f){var g=[],h=a.data,p=a.meta,l=threeModels.CuboidModel,m=h.length;a=h[0].length;for(var q=getMinMax(h),k=q.smallestInData,t=q.biggestInData-k,r=new RandomPicker,q=0;q<m;q++)for(var d=r.pickSeriesColor(),n=0;n<a;n++){var N=4*q-4*(m-1)/2,O=8*n-8*(a-1)/2,P=(h[q][n]-k)/t*8;.05>P&&(P=.05);N=new l([N,P,O],[1,P,1],d,h[q][n],p.rows[q],p.columns[n],b,c,e);g.push(N)}if(f)for(b=0;b<f.length;b++)q=f[b][0],n=f[b][1],g[q*a+n].setFocus();return g}
function createLabelPlanes(a,b,c){var e=[],f=a.meta.columns;a=a.meta.rows.length;c=canvasLabelGenerator.create(c);for(var g=threeModels.PlaneModel,h=0;h<f.length;h++){var p=c.generateLabelImageDataBasedOnText(f[h]),l=2/p.textHeight*p.textWidth,l=new g([(4*(a-1)+2)/2+l/2,0,8*h-8*(f.length-1)/2],[l/2,1,1],!1);l.connectWithTexture(p.imageData,b);e.push(l)}return e}
function getMinMax(a){var b=a[0][0],c=a[0][0],e;for(e in a){var f=a[e],g=Math.max.apply(Math,f),f=Math.min.apply(Math,f);g>b&&(b=g);f<c&&(c=f)}0<c&&(c=0);return{biggestInData:b,smallestInData:c}};var canvasLabelGenerator={ctx:null,width:1500,height:40,create:function(a){null===this.ctx&&(a.width=this.width,a.height=this.height,this.ctx=a.getContext("2d"));return this},generateLabelImageDataBasedOnText:function(a){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.fillStyle="white";this.ctx.fillRect(0,0,this.width,this.height);this.ctx.fillStyle="black";this.ctx.font="30px Arial";this.ctx.textAlign="center";this.ctx.textBaseline="middle";var b=this.ctx.measureText(a).width+10;this.ctx.fillText(a,
b/2,this.height/2);return{imageData:this.ctx.getImageData(0,0,b,this.height),textWidth:b,textHeight:this.height}}};var threeDgridWebgl={draw:function(a,b,c,e,f){function g(){U||(O=N+(G-u)/600*w,h(),requestAnimationFrame(g))}function h(){k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT);k.useProgram(d);k.bindBuffer(k.ARRAY_BUFFER,F.planeVerticesBuffer);k.vertexAttribPointer(d.aPositionIdx,3,k.FLOAT,!1,0,0);k.enableVertexAttribArray(d.aPositionIdx);k.bindBuffer(k.ARRAY_BUFFER,F.planeTextureCoordinatesBuffer);k.vertexAttribPointer(d.aTexCoordIdx,2,k.FLOAT,!1,0,0);k.enableVertexAttribArray(d.aTexCoordIdx);k.activeTexture(k.TEXTURE0);
k.uniform1i(d.uSamplerIdx,0);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,F.planeIndicesBuffer);for(var a in W){var b=W[a];b.calculateModelMatrix(O);mat4.multiply(b.MVPMatrix,V,b.modelMatrix);k.uniformMatrix4fv(d.uMVPMatrixIdx,!1,b.MVPMatrix);k.bindTexture(k.TEXTURE_2D,b.texture);k.drawElements(k.TRIANGLES,F.planeIndicesBuffer.numOfIndices,k.UNSIGNED_BYTE,0)}k.useProgram(t);k.bindBuffer(k.ARRAY_BUFFER,F.verticesBuffer);k.vertexAttribPointer(t.aPositionIdx,3,k.FLOAT,!1,0,0);k.enableVertexAttribArray(t.aPositionIdx);
k.bindBuffer(k.ARRAY_BUFFER,null);k.bindBuffer(k.ARRAY_BUFFER,F.normalsBuffer);k.vertexAttribPointer(t.aNormalIdx,3,k.FLOAT,!1,0,0);k.enableVertexAttribArray(t.aNormalIdx);k.bindBuffer(k.ARRAY_BUFFER,null);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,F.indicesBuffer);k.uniform1i(t.uIsTranslucentIdx,0);if(threeModels.isAnythingFocused())for(var c in E)E[c].isFocus&&p(E[c],!1);else for(c in E)p(E[c],!1);if(threeModels.isAnythingFocused()){k.depthMask(!1);k.enable(k.BLEND);k.blendEquation(k.FUNC_ADD);k.blendFunc(k.ZERO,
k.SRC_COLOR);k.uniform1i(t.uIsTranslucentIdx,1);for(var e in E)p(E[e],!0);k.depthMask(!0);k.disable(k.BLEND)}k.useProgram(r);k.bindBuffer(k.ARRAY_BUFFER,F.wireFrameVerticesBuffer);k.vertexAttribPointer(r.aPositionIdx,3,k.FLOAT,!1,0,0);k.enableVertexAttribArray(r.aPositionIdx);k.bindBuffer(k.ARRAY_BUFFER,null);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,F.cubeWireFrameIndicesBuffer);for(var f in E)a=E[f],b=void 0,b=!a.isFocus&&threeModels.isAnythingFocused()?vec3.fromValues(.6,.6,.6):vec3.fromValues(.8,.8,
.8),k.uniformMatrix4fv(r.uMVPMatrixIdx,!1,a.MVPMatrix),k.uniform3fv(r.uMaterialColorIdx,b),k.drawElements(k.LINES,F.cubeWireFrameIndicesBuffer.numOfIndices,k.UNSIGNED_BYTE,0);console.log(O)}function p(a,b){a.calculateModelMatrix(O);mat4.multiply(a.MVPMatrix,V,a.modelMatrix);k.uniformMatrix4fv(t.uMVPMatrixIdx,!1,a.MVPMatrix);mat4.multiply(a.MVMatrix,Q,a.modelMatrix);mat3.normalFromMat4(a.normalMatrix,a.MVMatrix);k.uniformMatrix4fv(t.uMVMatrixIdx,!1,a.MVMatrix);k.uniformMatrix3fv(t.uNormalMatrixIdx,
!1,a.normalMatrix);if(b)c=vec3.fromValues(1,1,1);else var c=a.fillColorArray,c=vec3.fromValues(c[0],c[1],c[2]);k.uniform3fv(t.uMaterialColorIdx,c);k.drawElements(k.TRIANGLES,F.indicesBuffer.numOfIndices,k.UNSIGNED_BYTE,0)}function l(a,b,c,d,e,f,g){var h=vec4.fromValues(0,1,0,1);vec4.transformMat4(h,h,a);a=[h[0]/h[3],h[1]/h[3]];g.genericShowDoubleLineTipDataYOnly(c/2*a[0]+c/2,d/2-d/2*a[1],e,b,f)}function m(){for(var a=0;a<E.length;a++){var b=E[a];b.isFocus&&l(b.MVPMatrix,b.mcColor,k.viewportWidth,
k.viewportHeight,b.label,b.dataY,b.staticTipControl)}}function q(a){function c(){var a=b.getBoundingClientRect(),d=G-a.left,a=C-a.top;k.bindFramebuffer(k.FRAMEBUFFER,n);k.useProgram(r);k.bindBuffer(k.ARRAY_BUFFER,F.verticesBuffer);k.vertexAttribPointer(r.aPositionIdx,3,k.FLOAT,!1,0,0);k.enableVertexAttribArray(r.aPositionIdx);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,F.indicesBuffer);var e=-1,f;for(f in E){var g;g=f;var h=d,l=k.viewportHeight-a;k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT);var m=new Uint8Array(4),
p=void 0;for(p in E){k.uniformMatrix4fv(r.uMVPMatrixIdx,!1,E[p].MVPMatrix);var q=p===g?vec3.fromValues(1,0,0):vec3.fromValues(0,0,0);k.uniform3fv(r.uMaterialColorIdx,q);k.drawElements(k.TRIANGLES,F.indicesBuffer.numOfIndices,k.UNSIGNED_BYTE,0)}k.readPixels(h,l,1,1,k.RGBA,k.UNSIGNED_BYTE,m);g=255===m[0]&&0===m[1]&&0===m[2]?!0:void 0;if(g){e=f;break}}k.bindFramebuffer(k.FRAMEBUFFER,null);return e}var d=!1;(function(a){a.addEventListener("mousemove",function(a){G=a.clientX;C=a.clientY})})(a);(function(a){var b=
-1,e=-1;a.addEventListener("mouseover",function(a){b=window.setInterval(function(){if(!d){var a=c();-1!==a&&E[a].isFocus&&(a=-1);if(-1!==e&&-1===a)v.hideTip(),e=a;else if(e!==a){var b=E[a];l(b.MVPMatrix,b.mcColor,k.viewportWidth,k.viewportHeight,b.label,b.dataY,v);e=a}}},1E3)});a.addEventListener("mouseout",function(){v.hideTip();window.clearInterval(b)})})(a);(function(a){a.addEventListener("mousedown",function(a){d=!0;v.hideTipImmediately();u=a.clientX;M=a.clientY;U=!1;N=O;g()});window.addEventListener("mouseup",
function(){if(3<Math.abs(G-u)||3<Math.abs(C-M))d=!1,U=!0,m();else{d=!1;U=!0;var a=c();-1!==a&&(a=E[a],a.toggleFocus()?l(a.MVPMatrix,a.mcColor,k.viewportWidth,k.viewportHeight,a.label,a.dataY,a.staticTipControl):a.staticTipControl.hideTip(),h())}})})(a)}var k,t,r,d,n,N=0,O=a.startAngle,P=mat4.create(),Q=mat4.create(),V=mat4.create(),F,E=[],W=[],U=!1,u=0,M=0,G=0,C=0,w=Math.PI/2,v=new TipControl(f,7,!1);v.createTip();a.meta={};a.meta.rows=a.series.rows;a.meta.columns=a.series.columns;a.data=a.series.data;
(function(a){k=webglUtil.createGLContext(b);t=webglUtil.createProgram("shader-vertex","shader-fragment",k);r=webglUtil.createProgram("shader-simple-vertex","shader-simple-fragment",k);d=webglUtil.createProgram("shader-label-vertex","shader-label-fragment",k);n=webglUtil.createFrameBufferObject(k);console.log("program successfully created");k.enable(k.DEPTH_TEST);E=convertToCuboidModels(a,f,7,!1,a.series.focus);W=createLabelPlanes(a,k,c);F=webglUtil.prepareModelBuffers(k);console.log("model data buffers successfully created.");
k.useProgram(t);a=k.getAttribLocation(t,"MCVertex");t.aPositionIdx=a;a=k.getAttribLocation(t,"MCNormal");t.aNormalIdx=a;t.uMVPMatrixIdx=k.getUniformLocation(t,"MVPMatrix");t.uNormalMatrixIdx=k.getUniformLocation(t,"NormalMatrix");t.uMVMatrixIdx=k.getUniformLocation(t,"MVMatrix");mat4.perspective(P,.2*Math.PI,k.viewportWidth/k.viewportHeight,1,2E3);mat4.lookAt(Q,vec3.fromValues(5,40,40),vec3.fromValues(0,4,0),vec3.fromValues(0,1,0));mat4.multiply(V,P,Q);a=k.getUniformLocation(t,"ecDirectionalLightPositionOne");
var g=vec3.fromValues(-100,100,100),l=vec3.create();vec3.transformMat4(l,g,Q);k.uniform3fv(a,l);a=k.getUniformLocation(t,"ecDirectionalLightPositionTwo");g=vec3.fromValues(100,-100,0);l=vec3.create();vec3.transformMat4(l,g,Q);k.uniform3fv(a,l);t.uMaterialColorIdx=k.getUniformLocation(t,"materialColor");t.uIsTranslucentIdx=k.getUniformLocation(t,"IsTranslucent");k.clearColor(1,1,1,1);k.useProgram(r);r.aPositionIdx=k.getAttribLocation(r,"MCVertex");r.uMVPMatrixIdx=k.getUniformLocation(r,"MVPMatrix");
r.uMaterialColorIdx=k.getUniformLocation(r,"materialColor");k.useProgram(d);d.aPositionIdx=k.getAttribLocation(d,"MCVertex");d.aTexCoordIdx=k.getAttribLocation(d,"aTexCoord");d.uMVPMatrixIdx=k.getUniformLocation(d,"MVPMatrix");d.uSamplerIdx=k.getUniformLocation(d,"uSampler");console.log("webgl stuffs ready");q(e);h();m()})(a)}};var weaver={createContainers:function(a,b){a.setAttribute("class","mc-container");var c=a.getBoundingClientRect(),e=c.width,c=c.height,f,g,h,p,l,m;b.offScreenCanvas&&(m=document.createElement("canvas"),m.style.display="none",a.appendChild(m));b.svg&&(f=document.createElementNS("http://www.w3.org/2000/svg","svg"),f.style.position="absolute",f.style.left="0px",f.style.top="0px",f.setAttributeNS(null,"width",e.toString()),f.setAttributeNS(null,"height",c.toString()),a.appendChild(f));b.canvas&&(p=document.createElement("canvas"),
a.appendChild(p));b.tipContainer&&(g=document.createElement("div"),g.setAttribute("class","mc-div-draw-layer"),a.appendChild(g));b.svgTrigger&&(h=document.createElementNS("http://www.w3.org/2000/svg","svg"),h.setAttributeNS(null,"width",e.toString()),h.setAttributeNS(null,"height",c.toString()),h.style.position="absolute",h.style.left="0",h.style.top="0",a.appendChild(h));b.canvasTrigger&&(l=document.createElement("div"),a.appendChild(l));return{svg:f,div:g,svgTrigger:h,canvas:p,offScreenCanvas:m,
canvasTrigger:l}},weave:function(a,b,c){switch(a){case "basicLineIrregular":this.weaveBasicLineIrregular(b,c);break;case "basicLineRegular":this.weaveBasicLineRegular(b,c);break;case "basicCategory":this.weaveBasicCategory(b,c);break;case "singleTime":this.weaveSingleTime(b,c);break;case "basicStackRegular":this.weaveBasicStackRegular(b,c);break;case "basicPieChart":this.weaveBasicPieChart(b,c);break;case "3dGrid":this.weave3dGrid(b,c)}},weaveBasicLineIrregular:function(a,b){var c=this.createContainers(b,
{svg:!0,svgTrigger:!0,tipContainer:!0}),e=c.svg,f=c.div,c=c.svgTrigger;colors.initLinearGradients(e);var g=new Legend(e,a.series,a.legend);g.analyze();var g=new GeneralLayout(e,a.mainTitle,a.subTitle,a.yAxisTitle,a.xAxisTitle,g),h=g.analyze(),p=h.xAxisLength-10-10,l=(new BasicLineIrregularDataAnalyst(a,p)).analyze(),p=new X_LinearAxis(e,p,l.minX,l.maxX,h.originPosition,10,10),h=new Y_LinearAxis(e,h.yAxisLength,l.minY,l.maxY,h.originPosition,p,!1,!1),m=p.analyze(),q=h.analyze(),e=new BasicLineIrregularDataViewer(f,
e,c,a,m,q,l.isContinual);g.draw();p.draw();h.draw();e.draw()},weaveBasicLineRegular:function(a,b){var c=this.createContainers(b,{svg:!0,svgTrigger:!0,tipContainer:!0}),e=c.svg,f=c.div,c=c.svgTrigger;colors.initLinearGradients(e);var g=new Legend(e,a.series,a.legend);g.analyze();var g=new GeneralLayout(e,a.mainTitle,a.subTitle,a.yAxisTitle,a.xAxisTitle,g),h=g.analyze(),p=h.xAxisLength-0-0,l=(new BasicLineRegularDataAnalyst(a,p)).analyze(),p=new X_LinearAxis(e,p,a.start,l.maxX,h.originPosition,0,0),
h=new Y_LinearAxis(e,h.yAxisLength,l.minY,l.maxY,h.originPosition,p,!1,!1),m=p.analyze(),q=h.analyze(),e=new BasicLineRegularDataViewer(f,e,c,a,m,q,l.isContinual);g.draw();p.draw();h.draw();e.draw()},weaveBasicCategory:function(a,b){var c=this.createContainers(b,{svg:!0,svgTrigger:!0,tipContainer:!0}),e=c.svg,f=c.div,c=c.svgTrigger;colors.initLinearGradients(e);var g=new Legend(e,a.series,a.legend,"rectangular");g.analyze();var g=new GeneralLayout(e,a.mainTitle,a.subTitle,a.yAxisTitle,a.xAxisTitle,
g),h=g.analyze(),p=(new BasicCategoryDataAnalyst(a)).analyze(),l=new X_CategoryAxis(e,h.xAxisLength-0-0,h.originPosition,p.seriesNames,0,0),h=new Y_LinearAxis(e,h.yAxisLength,p.minY,p.maxY,h.originPosition,l,!1,!1),p=l.analyze(),m=h.analyze(),e=new BasicCategoryDataViewer(f,e,c,a,p,m);g.draw();l.draw();h.draw();e.draw()},weaveSingleTime:function(a,b){var c=this.createContainers(b,{svg:!0,svgTrigger:!0,tipContainer:!0}),e=c.svg,f=c.div,c=c.svgTrigger;colors.initLinearGradients(e);var g=new Legend(e,
a.series,a.legend,"rectangular");g.analyze();var g=new GeneralLayout(e,a.mainTitle,a.subTitle,a.yAxisTitle,a.xAxisTitle,g),h=g.analyze(),p=(new BasicLineRegularDataAnalyst(a,h.xAxisLength)).analyze(),l=new TimeAxis(e,h.xAxisLength,p.maxX,h.originPosition,a.unit,a.interval),h=new Y_LinearAxis(e,h.yAxisLength,p.minY,p.maxY,h.originPosition,l,!1,!1),m=l.analyze(),q=h.analyze(),e=new BasicSingleTimeData(f,e,c,a,m,q,p.isContinual);g.draw();l.draw();h.draw();e.draw()},weaveBasicStackRegular:function(a,
b){var c=this.createContainers(b,{svg:!0,svgTrigger:!0,tipContainer:!0}),e=c.svg,f=c.div,c=c.svgTrigger;colors.initLinearGradients(e);var g=new Legend(e,a.series,a.legend);g.analyze();var g=new GeneralLayout(e,a.mainTitle,a.subTitle,a.yAxisTitle,a.xAxisTitle,g),h=g.analyze(),p=h.xAxisLength-0-0,l=(new BasicStackRegularDataAnalyst(a,p)).analyze(),p=new X_LinearAxis(e,p,a.start,l.maxX,h.originPosition,0,0),h=new Y_LinearAxis(e,h.yAxisLength,l.minY,l.maxY,h.originPosition,p,!0,!1),m=p.analyze(),q=h.analyze(),
e=new BasicStackRegularDataViewer(f,e,c,a,m,q,l.isContinual);g.draw();p.draw();h.draw();e.draw()},weaveBasicPieChart:function(a,b){var c=this.createContainers(b,{svg:!0,svgTrigger:!0,tipContainer:!0}),e=c.svg,f=c.div,c=c.svgTrigger;colors.initLinearGradients(e);var g=new Legend(e,a.series,a.legend);g.analyze();var g=new LayoutNoAxes(e,a.mainTitle,a.subTitle,g),h=g.analyze(),p=(new BasicPieDataAnalyst(a)).analyze();(new BasicPieDataViewer(f,e,c,a,h.center,h.dataDrawAreaX,h.dataDrawAreaY,h.radiusForLabel,
h.radiusForPie,h.radiusForConnectionLine,p.total)).draw();g.draw()},weave3dGrid:function(a,b){var c=this.createContainers(b,{svg:!0,svgTrigger:!0,tipContainer:!0,canvas:!0,offScreenCanvas:!0,canvasTrigger:!0});b.style.background="white";var e=c.svg,f=c.div,g=c.svgTrigger,h=c.canvas,p=c.offScreenCanvas,c=c.canvasTrigger;colors.initLinearGradients(e);var l=[],m=new Legend(e,a.series,a.rowLegend,"rectangular");m.analyze(a.series.rows,!0);var q=new Legend(e,a.series,a.columnLegend);q.analyze(a.series.columns,
!1);l.push(m);l.push(q);e=new MultipleLegendLayout(e,a.mainTitle,a.subTitle,l);m=e.analyze();l=[m.originPosition[0],m.originPosition[1]-m.dataDrawAreaY];m=[m.dataDrawAreaX,m.dataDrawAreaY];h.style.position="absolute";h.style.left=l[0]+"px";h.style.top=l[1]+"px";h.width=m[0];h.height=m[1];c.style.position="absolute";c.style.left=l[0]+"px";c.style.top=l[1]+"px";c.style.width=m[0]+"px";c.style.height=m[1]+"px";f.style.left=l[0]+"px";f.style.top=l[1]+"px";f.style.width=m[0]+"px";f.style.height=m[1]+"px";
g.style.display="none";e.draw();threeDgridWebgl.draw(a,h,p,c,f)}};
